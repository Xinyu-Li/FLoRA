
function generateChatgptAgentIcon(agentName, agentToolIconSvg) {
    return `<!-- chatgpt general tool button - designed for all chatgpt assistant functions-->
        <button title="Show Assistant ${agentName}" type="button" id="show-multi-separate-agents-btn-${agentName}" class="btn btn-outline-secondary border" style="height: 30px; width: 30px; padding: 1px 6px;margin-bottom: 10px;">
            ${agentToolIconSvg}
        </button>`;
}

function generateToolsMenu() {
    let instrumentationToolContainerStart = '<!-- instrumentation tools buttons   -->' +
        '<div style="margin: 0; padding: 0; border: 0; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; direction: ltr; background: none; font-size: 14px; line-height: 20px; height: 100%; position: fixed; top: 61px; left: 100%; z-index: 199; -webkit-tap-highlight-color: rgba(255, 255, 255, 0);" id="side-annotation-toolbar-div">' +
        '    <div id="side-annotation-toolbar" class="my-side-annotation-toolbar" style="position: absolute;  width: 50px; z-index: 2; background-color: white;">';
        // '            <button title="Show Planner" type="button" id="showPlannerBtn" class="d-none btn btn-outline-secondary border" style="height: 30px; width: 30px; padding: 1px 6px;margin-bottom: 10px;">' +
        // '                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="18" height="18" viewBox="0 0 439.814 439.814" style="enable-background:new 0 0 439.814 439.814;" xml:space="preserve"><path d="m88 32h-8a8.009 8.009 0 0 0 -8 8v32h16z"/><path d="m136 96a24.027 24.027 0 0 1 -24 24h-8v32h8a24 24 0 0 1 0 48h-8v32h8a24 24 0 0 1 0 48h-8v32h8a24 24 0 0 1 0 48h-8v32h8a24 24 0 0 1 0 48h-8v40h320v-448h-320v40h8a24.027 24.027 0 0 1 24 24zm24-40h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16zm0 32h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16zm0 32h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16zm0 32h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16zm0 32h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16zm0 32h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16zm0 32h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16zm0 32h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16zm0 32h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16zm0 32h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16zm0 32h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16zm0 32h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16zm0 32h224a8 8 0 0 1 0 16h-224a8 8 0 0 1 0-16z"/><path d="m72 120h16v32h-16z"/><path d="m64 104h48a8 8 0 0 0 0-16h-48a8 8 0 0 0 0 16z"/><path d="m456 164.944-16-8v86.112l16-8z"/><path d="m456 52.944-16-8v86.112l16-8z"/><path d="m456 276.944-16-8v86.112l16-8z"/><path d="m72 472a8.009 8.009 0 0 0 8 8h8v-40h-16z"/><path d="m64 184h48a8 8 0 0 0 0-16h-48a8 8 0 0 0 0 16z"/><path d="m456 388.944-16-8v86.112l16-8z"/><path d="m72 200h16v32h-16z"/><path d="m72 360h16v32h-16z"/><path d="m64 344h48a8 8 0 0 0 0-16h-48a8 8 0 0 0 0 16z"/><path d="m64 264h48a8 8 0 0 0 0-16h-48a8 8 0 0 0 0 16z"/><path d="m72 280h16v32h-16z"/><path d="m64 424h48a8 8 0 0 0 0-16h-48a8 8 0 0 0 0 16z"/></svg>' +
        // '            </button>' +
        // '            <button title="Show Writing Suggestion" type="button" id="showWritingSuggestionBtn" class="btn btn-outline-secondary border" style="height: 30px; width: 30px; padding: 1px 6px;margin-bottom: 10px;">' +
        // '                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="black" class="bi bi-magic" viewBox="0 0 16 16"><path d="M9.5 2.672a.5.5 0 1 0 1 0V.843a.5.5 0 0 0-1 0v1.829Zm4.5.035A.5.5 0 0 0 13.293 2L12 3.293a.5.5 0 1 0 .707.707L14 2.707ZM7.293 4A.5.5 0 1 0 8 3.293L6.707 2A.5.5 0 0 0 6 2.707L7.293 4Zm-.621 2.5a.5.5 0 1 0 0-1H4.843a.5.5 0 1 0 0 1h1.829Zm8.485 0a.5.5 0 1 0 0-1h-1.829a.5.5 0 0 0 0 1h1.829ZM13.293 10A.5.5 0 1 0 14 9.293L12.707 8a.5.5 0 1 0-.707.707L13.293 10ZM9.5 11.157a.5.5 0 0 0 1 0V9.328a.5.5 0 0 0-1 0v1.829Zm1.854-5.097a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L8.646 5.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0l1.293-1.293Zm-3 3a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L.646 13.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0L8.354 9.06Z"/></svg>' +
        // '            </button>' +
        // '            <button title="Show Video" type="button" id="showVideoBtn" class="btn btn-outline-secondary border" style="height: 30px; width: 30px; padding: 1px 6px;margin-bottom: 10px;">' +
        // '                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-camera-fill" viewBox="0 0 16 16"><path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/><path d="M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"/></svg>' +
        // '            </button>' +
        // '            </button>' +
        // '            <button title="Show Writing Suggestion" type="button" id="showWritingSuggestionBtn" class="btn btn-outline-secondary border" style="height: 30px; width: 30px; padding: 1px 6px;margin-bottom: 10px;">' +
        // '                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-magic" viewBox="0 0 16 16"><path d="M9.5 2.672a.5.5 0 1 0 1 0V.843a.5.5 0 0 0-1 0v1.829Zm4.5.035A.5.5 0 0 0 13.293 2L12 3.293a.5.5 0 1 0 .707.707L14 2.707ZM7.293 4A.5.5 0 1 0 8 3.293L6.707 2A.5.5 0 0 0 6 2.707L7.293 4Zm-.621 2.5a.5.5 0 1 0 0-1H4.843a.5.5 0 1 0 0 1h1.829Zm8.485 0a.5.5 0 1 0 0-1h-1.829a.5.5 0 0 0 0 1h1.829ZM13.293 10A.5.5 0 1 0 14 9.293L12.707 8a.5.5 0 1 0-.707.707L13.293 10ZM9.5 11.157a.5.5 0 0 0 1 0V9.328a.5.5 0 0 0-1 0v1.829Zm1.854-5.097a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L8.646 5.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0l1.293-1.293Zm-3 3a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L.646 13.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0L8.354 9.06Z"/></svg>' +
        // '            </button>' +
        // '            <button title="Show Video" type="button" id="showVideoBtn" class="btn btn-outline-secondary border" style="height: 30px; width: 30px; padding: 1px 6px;margin-bottom: 10px;">' +
        // '                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-camera-fill" viewBox="0 0 16 16"><path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/><path d="M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"/></svg>' +
        // '            </button>' +
    let annotationToolBtn = `<!-- annotation tool button-->
        <button data-label="${annotationToolDataLabel}" title="Annotation sidebar" type="button" id="showAnnotationSideBarBtn" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRightNotesDiv" aria-controls="offcanvasRightNotesDiv" class="btn btn-outline-secondary border toolbar-btn" style="padding-left: 6px; padding-right: 6px; width: 36px; margin-bottom: 10px; height: 45px; ">
           <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="black" class="bi bi-caret-left-fill" viewBox="0 0 16 16"><path d="m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z"/></svg>
        </button>
        <button title="Show highlights" type="button" id="showHighlightsBtn" class="btn btn-outline-secondary border d-none" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class=""><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 13c3.866 0 7-2.239 7-5s-3.134-5-7-5-7 2.239-7 5 3.134 5 7 5zm0-4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></g></svg>
           <!-- 隐藏highlight icon -->
           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="d-none"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="18" height="18"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.73 12.973A9.89 9.89 0 0 1 8 13c-3.866 0-7-2.239-7-5 0-.753.233-1.467.65-2.107m5.62-2.866A9.89 9.89 0 0 1 8 3c3.866 0 7 2.239 7 5 0 .753-.233 1.467-.65 2.107M1 1l14 14L1 1z"></path></g></svg>
        </button>`;
    let annotationSearchToolBtn = `<!-- annotation search tool button-->
        <button data-label="${searchAnnotationToolDataLabel}" title="Search Annotations" type="button" id="showSearchAnnotationsBtn" class="btn btn-outline-secondary border toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
           <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="black" class="bi bi-search" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/></svg>
        </button>`;
    let scaffoldsToolBtn = `<!-- scaffolding tool button-->
        <button title="View Scaffolds" type="button" id="showScaffoldsBtn" class="btn btn-outline-secondary border position-relative" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
           <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="black" class="bi bi-envelope-plus" viewBox="0 0 16 16"><path d="M2 2a2 2 0 0 0-2 2v8.01A2 2 0 0 0 2 14h5.5a.5.5 0 0 0 0-1H2a1 1 0 0 1-.966-.741l5.64-3.471L8 9.583l7-4.2V8.5a.5.5 0 0 0 1 0V4a2 2 0 0 0-2-2H2Zm3.708 6.208L1 11.105V5.383l4.708 2.825ZM1 4.217V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v.217l-7 4.2-7-4.2Z"/><path d="M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Zm-3.5-2a.5.5 0 0 0-.5.5v1h-1a.5.5 0 0 0 0 1h1v1a.5.5 0 0 0 1 0v-1h1a.5.5 0 0 0 0-1h-1v-1a.5.5 0 0 0-.5-.5Z"/></svg>
           <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none" style="top:12px; left:-52px;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>`;
    let gptScaffoldsToolBtn = `<!-- scaffolding tool button-->
        <button  data-label="${gptScaffoldToolDataLabel}" title="View Scaffolds" type="button" id="show-gpt-scaffolds-btn" class="btn btn-outline-secondary border position-relative" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
           <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="black" class="bi bi-envelope-plus" viewBox="0 0 16 16"><path d="M2 2a2 2 0 0 0-2 2v8.01A2 2 0 0 0 2 14h5.5a.5.5 0 0 0 0-1H2a1 1 0 0 1-.966-.741l5.64-3.471L8 9.583l7-4.2V8.5a.5.5 0 0 0 1 0V4a2 2 0 0 0-2-2H2Zm3.708 6.208L1 11.105V5.383l4.708 2.825ZM1 4.217V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v.217l-7 4.2-7-4.2Z"/><path d="M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Zm-3.5-2a.5.5 0 0 0-.5.5v1h-1a.5.5 0 0 0 0 1h1v1a.5.5 0 0 0 1 0v-1h1a.5.5 0 0 0 0-1h-1v-1a.5.5 0 0 0-.5-.5Z"/></svg>
           <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-130px; height: 55px; min-width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        
        </button>`;
    let gptChatWithScaffoldsToolBtn = `<!-- chatgpt tool button-->
        <button data-label="${multiAgentsSingleWindowToolDataLabel}" title="Show MultiAgents result" type="button" id="show-gpt-chat-with-scaffolds-btn" class="btn btn-outline-secondary border position-relative toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
            <svg fill="#000000" width="18" height="18" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg"><title>chatgpt icon</title><path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"/></svg>
            <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none chat-with-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>`;
    // ZoteroNotes tool button
    let zoteroNotesToolBtn = '<!-- zotero notes tool button-->' +
        '<button title="Zotero Notes" type="button" id="showZoteroNotesBtn" class="btn btn-outline-secondary border" style="height: 40px; width: 40px; padding: 1px 6px; margin-bottom: 10px;">' +
        '   <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-layout-text-sidebar" viewBox="0 0 16 16">' +
        '       <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM5 5h1V4H5v1zm0 2h1V6H5v1zm0 2h1V8H5v1zm0 2h1v-1H5v1zm2-6h4V4H7v1zm0 2h4V6H7v1zm0 2h4V8H7v1zm0 2h4v-1H7v1z"/>' +
        '   </svg>' +
        '</button>';
    // ProcessVisual tool button
    let processVisualToolBtn = `<!-- process visual tool button -->
        <button  data-label="${processVisualToolDataLabel}" title="Show Process" type="button" id="showProcessVisualToolBtn" class="btn btn-outline-secondary border" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
           <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-spline">
               <path d="M3 3v16a2 2 0 0 0 2 2h16"/><path d="M7 16c.5-2 1.5-7 4-7 2 0 2 3 4 3 2.5 0 4.5-5 5-7"/>
           </svg>
        </button>`;

    let consultationTableToolBtn = '<!-- medical consultation Finish tool button-->' +
        '<button data-label="临床推理对比分析表 Clinical Reasoning Comparative Analysis Table" title="Consultation Table" type="button" id="show-consultation-table-btn" class="btn btn-outline-secondary border toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">' +
        `<svg t="1752289096067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20491" width="22" height="22"><path d="M921.6 51.2H102.4a102.4 102.4 0 0 0-102.4 102.4v716.8a102.4 102.4 0 0 0 102.4 102.4h819.2a102.4 102.4 0 0 0 102.4-102.4V153.6a102.4 102.4 0 0 0-102.4-102.4zM409.6 640v-153.6h204.8v153.6z m204.8 102.4V870.4H409.6v-128zM614.4 256v128H409.6V256zM307.2 384H102.4V256h204.8z m0 102.4v153.6H102.4v-153.6z m409.6 0h204.8v153.6h-204.8z m0-102.4V256h204.8v128z m-614.4 358.4h204.8V870.4H102.4zM716.8 870.4v-128h204.8V870.4z" fill="#2c2c2c" p-id="20492"></path></svg>`
        +
        '</button>';

    let essayWritingToolBtn = `<!-- essay writing tool button-->
        <button data-label="${essayWritingToolDataLabel}" title="Write Essay" type="button" id="showWriteEssayBtn" class="btn btn-outline-secondary border toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
           <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="black" class="bi bi-pencil-fill" viewBox="0 0 16 16"><path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/></svg>
        </button>`;

    if (typeof(isBNU)!=='undefined' && isBNU){
        essayWritingToolBtn = `<!-- essay writing tool button -->
            <button data-label="${essayWritingToolDataLabel}" title="Write Essay" type="button" id="showWriteEssayBtn" class="btn btn-outline-secondary border toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
               <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="black" class="bi bi-pencil-fill" viewBox="0 0 16 16"><path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/></svg>
            </button>`;
    }

    let essayProductVisualToolBtn = `
        <button data-label="${essayProductVisualToolDataLabel}" title="Show Product" type="button" id="show-essay-product-visual-tool-btn" class="btn btn-outline-secondary border toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-sliders"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M8 12h8"/><path d="M10 11v2"/><path d="M8 17h8"/><path d="M14 16v2"/></svg>
        </button>`;

    let collaborateWritingToolBtn = `<!-- collaborate writing tool button-->
        <button data-label="${collaborateWritingToolDataLabel}" title="Collaborate Write" type="button" id="showCollaborateWriteBtn" class="btn btn-outline-secondary border toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
           <svg t="1685773401308" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4258" width="18" height="18"><path d="M610.492452 286.109123c38.099529-29.799632 62.29923-76.399055 61.49924-128.698409C670.591709 69.611799 597.692611-1.087327 509.893696 0.01266 422.494777 1.112646 351.995648 72.311766 351.995648 160.010682c0 51.199367 24.099702 96.798803 61.49924 126.098441C366.795465 317.808731 335.995846 371.308069 335.995846 432.007319c0 17.699781 14.299823 31.999604 31.999604 31.999604h287.99644c17.699781 0 31.999604-14.299823 31.999604-31.999604 0-60.69925-30.69962-114.198588-77.499042-145.898196zM415.994857 160.010682c0-52.899346 43.099467-95.998813 95.998813-95.998813s95.998813 43.099467 95.998813 95.998813-43.099467 95.998813-95.998813 95.998813-95.998813-43.099467-95.998813-95.998813z m-0.099999 239.997033c-5.69993 0-9.599881-5.799928-7.399908-11.099863 5.599931-13.299836 13.699831-25.599684 24.1997-36.099554C453.994387 331.60856 482.09404 320.008704 511.99367 320.008704s57.999283 11.599857 79.199021 32.799594c10.49987 10.49987 18.699769 22.799718 24.199701 36.099554 2.199973 5.299934-1.59998 11.099863-7.399909 11.099863H415.894858zM946.488298 846.102199c38.099529-29.799632 62.29923-76.399055 61.49924-128.698408-1.399983-87.798915-74.299081-158.49804-161.997997-157.398055-87.498918 1.099986-157.998047 72.299106-157.998047 159.998022 0 51.199367 24.099702 96.798803 61.49924 126.098441C702.791311 877.801807 671.991692 931.301146 671.991692 992.000396c0 17.699781 14.299823 31.999604 31.999604 31.999604h287.99644c17.699781 0 31.999604-14.299823 31.999604-31.999604 0-60.69925-30.69962-114.198588-77.499042-145.898197zM751.990703 720.003758c0-52.899346 43.099467-95.998813 95.998813-95.998813s95.998813 43.099467 95.998813 95.998813-43.099467 95.998813-95.998813 95.998814-95.998813-43.099467-95.998813-95.998814z m-0.099999 239.997033c-5.69993 0-9.599881-5.799928-7.399908-11.099863 5.599931-13.299836 13.699831-25.599684 24.1997-36.099553C789.990233 891.601637 818.089886 880.00178 847.989516 880.00178s57.999283 11.599857 79.199021 32.799595c10.49987 10.49987 18.699769 22.799718 24.199701 36.099553 2.199973 5.299934-1.59998 11.099863-7.399909 11.099863H751.890704zM274.496606 846.102199c38.099529-29.799632 62.29923-76.399055 61.49924-128.698408-1.399983-87.798915-74.299081-158.49804-161.997997-157.398055-87.498918 1.099986-157.998047 72.299106-157.998047 159.998022 0 51.199367 24.099702 96.798803 61.49924 126.098441C30.799619 877.801807 0 931.301146 0 992.000396c0 17.699781 14.299823 31.999604 31.999604 31.999604h287.99644c17.699781 0 31.999604-14.299823 31.999604-31.999604 0-60.69925-30.69962-114.198588-77.499042-145.898197zM79.999011 720.003758c0-52.899346 43.099467-95.998813 95.998813-95.998813s95.998813 43.099467 95.998813 95.998813-43.099467 95.998813-95.998813 95.998814-95.998813-43.099467-95.998813-95.998814z m-0.099999 239.997033c-5.69993 0-9.599881-5.799928-7.399908-11.099863 5.599931-13.299836 13.699831-25.599684 24.1997-36.099553C117.998541 891.601637 146.098194 880.00178 175.997824 880.00178s57.999283 11.599857 79.199021 32.799595c10.49987 10.49987 18.699769 22.799718 24.199701 36.099553 2.199973 5.299934-1.59998 11.099863-7.399909 11.099863H79.899012zM635.292146 720.003758c-5.899927 10.299873-16.699794 15.999802-27.699658 15.999803-5.399933 0-10.899865-1.399983-15.999802-4.299947L511.99367 685.804181l-79.599016 45.899433c-15.299811 8.799891-34.899569 3.599955-43.69946-11.699856-2.899964-4.999938-4.299947-10.49987-4.299946-15.999802 0-11.099863 5.69993-21.79973 15.999802-27.699657l79.599016-45.899433V544.005934c0-17.699781 14.299823-31.999604 31.999604-31.999604 8.799891 0 16.799792 3.599955 22.599721 9.399884 5.799928 5.799928 9.399884 13.799829 9.399883 22.59972v86.298933l79.599016 45.899433c15.299811 8.89989 20.499747 28.499648 11.699856 43.799458z" p-id="4259"></path></svg>
        </button>`;

    let mathEditorToolBtn = `<!-- math editor tool button-->
            <button  data-label="${mathToolDataLabel}" title="Math Editor" type="button" id="showMathEditorBtn" class="btn btn-outline-secondary border toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
               <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="18" height="18"><path d="M660 77.6H364c-42.4 0-76.8 34.4-76.8 76.8v792c0 42.4 34.4 76.8 76.8 76.8h296c42.4 0 76.8-34.4 76.8-76.8V154.4c0-42.4-34.4-76.8-76.8-76.8zM512 48.8c17.6 0 31.2 13.6 31.2 31.2v125.6h-62.4V80c0-17.6 13.6-31.2 31.2-31.2zM624 199.2v173.6H400V199.2H624zM736 334.4c0 17.6-13.6 31.2-31.2 31.2H320c-17.6 0-31.2-13.6-31.2-31.2v35.2h-61.6v-35.2c0-17.6 13.6-31.2 31.2-31.2h416c17.6 0 31.2 13.6 31.2 31.2zM654.4 516.8c-8 0-14.4-6.4-14.4-14.4v-60c0-8 6.4-14.4 14.4-14.4h60c8 0 14.4 6.4 14.4 14.4v60c0 8-6.4 14.4-14.4 14.4h-60zM485.6 516.8c-8 0-14.4-6.4-14.4-14.4v-60c0-8 6.4-14.4 14.4-14.4h60c8 0 14.4 6.4 14.4 14.4v60c0 8-6.4 14.4-14.4 14.4h-60zM316.8 516.8c-8 0-14.4-6.4-14.4-14.4v-60c0-8 6.4-14.4 14.4-14.4h60c8 0 14.4 6.4 14.4 14.4v60c0 8-6.4 14.4-14.4 14.4h-60zM654.4 634.4c-8 0-14.4-6.4-14.4-14.4v-60c0-8 6.4-14.4 14.4-14.4h60c8 0 14.4 6.4 14.4 14.4v60c0 8-6.4 14.4-14.4 14.4h-60zM485.6 634.4c-8 0-14.4-6.4-14.4-14.4v-60c0-8 6.4-14.4 14.4-14.4h60c8 0 14.4 6.4 14.4 14.4v60c0 8-6.4 14.4-14.4 14.4h-60zM316.8 634.4c-8 0-14.4-6.4-14.4-14.4v-60c0-8 6.4-14.4 14.4-14.4h60c8 0 14.4 6.4 14.4 14.4v60c0 8-6.4 14.4-14.4 14.4h-60zM654.4 752c-8 0-14.4-6.4-14.4-14.4v-60c0-8 6.4-14.4 14.4-14.4h60c8 0 14.4 6.4 14.4 14.4v60c0 8-6.4 14.4-14.4 14.4h-60zM485.6 752c-8 0-14.4-6.4-14.4-14.4v-60c0-8 6.4-14.4 14.4-14.4h60c8 0 14.4 6.4 14.4 14.4v60c0 8-6.4 14.4-14.4 14.4h-60zM316.8 752c-8 0-14.4-6.4-14.4-14.4v-60c0-8 6.4-14.4 14.4-14.4h60c8 0 14.4 6.4 14.4 14.4v60c0 8-6.4 14.4-14.4 14.4h-60zM660 850.4c0 17.6-13.6 31.2-31.2 31.2H364c-17.6 0-31.2-13.6-31.2-31.2v-173.6h62.4v143.2c0 17.6 13.6 31.2 31.2 31.2h154.4c17.6 0 31.2-13.6 31.2-31.2v-143.2h62.4v173.6z"/></svg>
            </button>`;


    let plannerToolBtn = `<!-- planner tool button-->
        <button data-label="${plannerToolDataLabel}" title="Show Planner2" type="button" id="showPlanner2Btn" class="btn btn-outline-secondary border toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
           <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="black" class="bi bi-list-check" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3.854 2.146a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708L2 3.293l1.146-1.147a.5.5 0 0 1 .708 0zm0 4a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708L2 7.293l1.146-1.147a.5.5 0 0 1 .708 0zm0 4a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 0 1 .708-.708l.146.147 1.146-1.147a.5.5 0 0 1 .708 0z"/></svg>
        </button>`;
    let checklistToolBtn = `<!-- checklist tool button-->
        <button data-label="${checklistToolDataLabel}" title="Show Checklist" type="button" id="show-checklist-btn" class="btn btn-outline-secondary border toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-ui-checks" viewBox="0 0 16 16">
            <path d="M7 2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-1zM2 1a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2H2zm0 8a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2H2zm.854-3.646a.5.5 0 0 1-.708 0l-1-1a.5.5 0 1 1 .708-.708l.646.647 1.646-1.647a.5.5 0 1 1 .708.708l-2 2zm0 8a.5.5 0 0 1-.708 0l-1-1a.5.5 0 0 1 .708-.708l.646.647 1.646-1.647a.5.5 0 0 1 .708.708l-2 2zM7 10.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-1zm0-5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 8a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/>
            </svg>
        </button>`
    // let chatgptToolBtn = '<!-- chatgpt tool button-->' +
    //     '<button data-label="人工智能助手 AI Assistant" title="Show GPT result" type="button" id="show-chatgpt-btn" class="btn btn-outline-secondary border toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">' +
    //     '<svg fill="#000000" width="18" height="18" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg"><title>chatgpt icon</title><path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"/></svg>' +
    //     '</button>';
    // language=HTML
    let multiAgentsSingleWindowToolBtn = `<!-- chatgpt tool button-->
        <button data-label="${multiAgentsSingleWindowToolDataLabel}" title="Show MultiAgents result" type="button" id="show-multi-agents-btn" class="btn btn-outline-secondary border position-relative toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
            <svg fill="#000000" width="18" height="18" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg"><title>chatgpt icon</title><path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"/></svg>
            <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>`;

    let patientMultiAgentsSingleWindowToolBtn = `<!-- chatgpt tool button-->
        <button data-label="病人 Patient" title="Show MultiAgents result" type="button" id="patient-show-multi-agents-btn" class="btn btn-outline-secondary border-0 position-relative toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
<!--            <svg t="1710211678330" collapseMultiAgents viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="4506" width="18" height="18"><title>patient icon</title><path d="M639.904 594.176c10.816-8.608 21.024-18.336 30.496-29.152C712.416 517.024 736 451.904 736 384c0-33.6-5.792-66.88-17.056-97.952a261.056 261.056 0 0 0-48.544-83.072C628.384 154.976 571.424 128 512 128c-59.424 0-116.384 26.976-158.4 74.976C311.584 250.976 288 316.096 288 384s23.616 133.024 65.6 181.024c9.472 10.784 19.68 20.544 30.496 29.12-125.76 37.024-221.44 127.04-248.416 237.856A270.048 270.048 0 0 0 128 896h768c0-21.92-2.656-43.328-7.68-64-27.008-110.784-122.688-200.832-248.448-237.824z m-238.144-71.296a187.968 187.968 0 0 1-20.48-28.48c3.424-0.32 7.072-0.64 10.976-1.088a577.536 577.536 0 0 0 94.528-18.56c58.24-16.64 127.776-46.944 184.928-102.496 0.192 3.904 0.288 7.808 0.288 11.744 0 53.472-18.656 103.328-49.76 138.88C591.36 558.144 551.456 576 512 576c-39.456 0-79.36-17.856-110.24-53.12zM360.32 431.68l-3.2 0.16a226.624 226.624 0 0 1-5.056-51.488c23.264-2.88 53.504-8.128 86.752-17.6 60.32-17.248 132.736-49.152 190.944-108.512 9.536 12.48 17.792 26.496 24.384 41.824-50.016 64.832-121.92 99.136-184.896 117.12-32.896 9.408-62.56 14.112-83.968 16.48-10.656 1.152-19.2 1.76-24.96 2.016z m60.928-130.496c-21.184 6.08-41.024 10.176-58.176 12.96a198.88 198.88 0 0 1 38.72-69.056C432.64 209.856 472.544 192 512 192c23.872 0 47.904 6.528 69.984 19.52-47.488 47.424-107.328 74.432-160.768 89.696zM305.12 700.832C363.2 743.04 434.72 768 512 768s148.8-24.96 206.848-67.168c50.144 34.496 85.984 80.768 102.656 131.168H202.496c16.64-50.4 52.48-96.672 102.624-131.2z m64.576-34.368C411.68 649.664 459.648 640 512 640c52.32 0 100.288 9.664 142.304 26.464A286.56 286.56 0 0 1 512 704a286.592 286.592 0 0 1-142.304-37.536z" fill="#2c2c2c" p-id="4507"></path></svg>-->
            <svg t="1752306529651" collapseMultiAgents viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="206892" width="22" height="22"><path d="M512 0C229.262222 0 0 229.262222 0 512s229.262222 512 512 512 512-229.262222 512-512S794.737778 0 512 0z" fill="#FFCC4D" p-id="206893"></path><path d="M355.555556 369.777778c-39.253333 0-71.111111 44.657778-71.111112 99.555555s31.857778 99.555556 71.111112 99.555556 71.111111-44.657778 71.111111-99.555556-31.857778-99.555556-71.111111-99.555555zM668.444444 369.777778c-39.253333 0-71.111111 44.657778-71.111111 99.555555s31.857778 99.555556 71.111111 99.555556 71.111111-44.657778 71.111112-99.555556-31.857778-99.555556-71.111112-99.555555zM824.888889 341.304889c-157.866667 0-221.866667-124.302222-224.426667-129.422222-7.111111-14.222222-1.422222-31.288889 12.515556-38.115556a28.387556 28.387556 0 0 1 38.115555 12.515556c2.275556 4.266667 51.768889 98.133333 173.795556 98.133333 15.644444 0 28.444444 12.8 28.444444 28.444444s-12.8 28.444444-28.444444 28.444445z m-625.777778 0c-15.644444 0-28.444444-12.8-28.444444-28.444445 0-15.928889 12.8-28.444444 28.444444-28.444444 144.497778 0 170.666667-88.746667 171.52-92.728889 4.266667-15.075556 19.626667-24.177778 34.702222-20.195555s24.177778 19.342222 20.48 34.417777c-1.422222 5.404444-36.124444 135.395556-226.702222 135.395556z" fill="#664500" p-id="206894"></path><path d="M909.255111 508.529778l-460.515555 298.951111 202.524444 27.306667 332.231111-205.084445c20.195556-12.231111 28.444444-23.608889 34.133333-49.493333 5.973333-26.168889 5.404444-94.72 5.404445-94.72l-113.777778 23.04z" fill="#FFAC33" p-id="206895"></path><path d="M512 753.777778c-123.448889 0-155.591111 80.782222-156.16 81.92-1.422222 5.973333 1.422222 12.231111 6.826667 15.36 5.12 3.413333 12.231111 2.56 16.782222-1.706667 0.284444 0 29.013333-24.462222 132.551111-24.462222 102.115556 0 131.413333 23.608889 132.551111 24.462222 2.56 2.56 5.973333 3.982222 9.671111 3.982222 2.275556 0 4.835556-0.568889 7.111111-1.706666 5.404444-3.413333 8.248889-9.671111 6.542223-15.928889-0.284444-1.137778-32.426667-81.92-155.875556-81.92z" fill="#664500" p-id="206896"></path><path d="M909.568 433.208889l-489.528889 367.217778c18.488889-6.826667 42.951111-12.8 74.24-14.791111 7.395556-0.568889 75.662222-17.92 75.662222-17.92l36.977778 29.297777s25.884444 10.524444 33.848889 15.36l354.133333-265.386666c31.288889-23.608889 37.831111-68.266667 14.222223-99.555556-23.608889-31.288889-68.266667-37.831111-99.555556-14.222222z" fill="#CCD6DD" p-id="206897"></path><path d="M776.561778 573.696l-282.168889 211.911111c7.395556-0.568889 14.222222-1.422222 22.186667-1.422222 38.684444-0.284444 68.266667 5.688889 90.168888 12.8l215.893334-161.848889c17.066667-12.515556 5.973333-24.462222-6.542222-41.528889-12.8-16.782222-22.471111-32.426667-39.537778-19.911111z" fill="#DA2F47" p-id="206898"></path><path d="M529.038222 717.511111l22.186667-16.497778 33.848889 45.226667-21.048889 16.782222z m63.146667-47.217778l22.186667-16.497777 34.133333 45.226666-21.048889 16.782222z m62.293333-46.08l22.186667-16.497777 33.848889 45.226666-21.048889 16.782222z m62.008889-47.217777l22.186667-16.497778 33.848889 45.226666-21.048889 16.782223z m63.715556-46.648889l21.902222-16.497778 34.133333 44.942222-21.048889 17.066667z m60.871111-46.08l22.186666-16.497778 33.848889 45.226667-21.048889 16.782222z" fill="#67757F" p-id="206899"></path><path d="M663.779556 827.306667s-5.603556-10.296889-14.961778-20.650667l-7.936 5.802667 22.897778 14.848z" fill="#452E04" p-id="206900"></path></svg>
            <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>`;
    let medicalScaffoldMultiAgentsSingleWindowToolBtn = `<!-- chatgpt tool button-->
        <button data-label="带教医生 Medical Teacher" title="Show MultiAgents result" type="button" id="medical-scaffold-show-multi-agents-btn" class="btn btn-outline-secondary border-0 position-relative toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
<!--             <svg t="1713954810237" collapseMultiAgents viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="18" height="18"><title>scaffold teacher icon</title>-->
<!--            <path d="M511.83 795.59l-46.4-80.82 93.2 0.23z" fill="#2c2c2c" p-id="3341" data-spm-anchor-id="a313x.search_index.0.i1.46d93a810kQjDt" className="selected"></path>-->
<!--            <path d="M511.83 556.45l-46.4 158.37 93.2-0.53z" fill="#2c2c2c" p-id="3342" data-spm-anchor-id="a313x.search_index.0.i0.46d93a810kQjDt" className="selected"></path>-->
<!--            <path d="M723.88 929.64H300.17c-50.9 0-98.87-19.94-135.08-56.15-36.21-36.21-56.15-84.18-56.15-135.08 0-50.9 19.94-98.87 56.15-135.08 36.21-36.21 84.18-56.15 135.08-56.15h423.71c50.9 0 98.87 19.94 135.08 56.15 36.21 36.21 56.15 84.18 56.15 135.08 0 50.9-19.94 98.87-56.15 135.08-36.2 36.21-84.18 56.15-135.08 56.15zM300.17 607.18c-72.36 0-131.23 58.87-131.23 131.23 0 72.36 58.87 131.23 131.23 131.23h423.71c72.36 0 131.23-58.87 131.23-131.23 0-72.36-58.87-131.23-131.23-131.23H300.17zM512.03 513.91C396.77 513.91 303 420.14 303 304.88S396.77 95.85 512.03 95.85c50.32 0 177.71 0.24 178.99 0.25l29.92 0.06 0.02 29.92c0 1.31 0.1 131.34 0.1 178.81 0 115.25-93.77 209.02-209.03 209.02z m0-358.06C429.85 155.85 363 222.7 363 304.88s66.85 149.03 149.03 149.03 149.03-66.86 149.03-149.03c0-33.29-0.05-107.23-0.08-148.84-41.08-0.08-113.83-0.19-148.95-0.19z" p-id="3343"></path>-->
<!--        </svg>-->
        <svg t="1752304821862" collapseMultiAgents viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="100400" width="24" height="24"><path d="M980.871 939.783c0-132.76-77.722-248.223-189.904-303.2a98.84 98.84 0 0 1 8.26 39.595v11.717c54.074 11.362 95 59.582 95 116.906v64.246c8.209 7.072 13.412 17.534 13.412 29.218 0 21.296-17.264 38.559-38.559 38.559-21.296 0-38.56-17.264-38.56-38.559 0-12.837 6.28-24.2 15.927-31.21v-65.63c0-38.945-31.863-70.808-70.807-70.808h-0.047c-38.945 0-70.808 31.863-70.808 70.808v66.914c8.692 7.07 14.25 17.848 14.25 29.926 0 21.296-17.264 38.559-38.56 38.559-21.295 0-38.559-17.264-38.559-38.559 0-11.684 5.205-22.145 13.411-29.218v-64.246c0-58.562 42.725-107.6 98.536-117.565-2.186-28.777-13.86-54.999-31.876-75.547a334.347 334.347 0 0 0-56.056-8.542c-9.26 212.545-74.647 377.267-153.942 377.267-79.302 0-144.691-164.748-153.944-377.317-0.411 0.026-0.818 0.066-1.228 0.094-19.253 22.664-30.918 51.944-30.918 83.835v97.43c27.397 10.071 46.942 36.396 46.942 67.287 0 39.582-32.088 71.67-71.67 71.67s-71.67-32.088-71.67-71.67c0-32.544 21.7-60.005 51.413-68.747V666.117c0-19.534 5.71-37.79 15.513-53.221C150.798 650.231 42.32 782.935 42.32 939.783v10.453h0.716c-0.184 0.82-0.312 1.645-0.312 2.474 0 39.373 210.01 71.292 469.073 71.292s469.074-31.92 469.074-71.293c0-0.828-0.127-1.652-0.312-2.473h0.312v-10.453zM517.23 232.701c-116.316 0-210.61 35.887-210.61 80.157 0 1.512 0.121 3.013 0.338 4.505h-0.338l44.491 209.173a167.448 167.448 0 0 0 2.33 10.956l0.122 0.574h0.02c18.403 73.304 85.041 128.006 163.844 128.006h0.022c84.225 0 154.562-62.48 166.956-143.38l43.432-205.33h-0.337c0.217-1.49 0.337-2.993 0.337-4.505 0-44.269-94.293-80.156-210.607-80.156z m-1.049-15.648c103.407 0 191.19 34.392 222.474 82.147h8.322V98.581h-0.04c0.014-0.371 0.04-0.743 0.04-1.117 0-44.751-102.846-81.03-229.713-81.03S287.55 52.712 287.55 97.464c0 0.373 0.026 0.746 0.04 1.117h-0.04v200.62h6.157c31.283-47.756 119.067-82.147 222.474-82.147z m-63.707-105.27c0-8.643 7.073-15.716 15.718-15.716h33.53V62.54c0-8.644 7.072-15.718 15.716-15.718s15.717 7.073 15.717 15.717v33.53h33.53c8.645 0 15.718 7.073 15.718 15.717s-7.072 15.718-15.718 15.718h-33.53v33.53c0 8.644-7.072 15.716-15.717 15.716s-15.716-7.072-15.716-15.716v-33.531h-33.53c-8.645 0-15.718-7.074-15.718-15.718z" p-id="100401" fill="#FFC000"></path></svg>
        <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>
`;
    let chatgptToolBtn = '<!-- chatgpt tool button-->' +
        '<button data-label="人工智能助手 AI Assistant" title="Show GPT result" type="button" id="show-chatgpt-btn" class="btn btn-outline-secondary border-0 toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">' +
        // "<svg t=\"1751871369726\" viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"10812\" width=\"28\" height=\"28\"><path d=\"M256 213.333333a42.666667 42.666667 0 0 0-42.666667 42.666667v512a42.666667 42.666667 0 0 0 42.666667 42.666667h512a42.666667 42.666667 0 0 0 42.666667-42.666667V256a42.666667 42.666667 0 0 0-42.666667-42.666667H256m0-42.666666h512a85.333333 85.333333 0 0 1 85.333333 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 1-85.333333-85.333333V256a85.333333 85.333333 0 0 1 85.333333-85.333333z\" p-id=\"10813\"></path><path d=\"M597.333333 649.088h-63.445333l-25.216-62.293333h-115.2l-23.808 62.293333H307.754667l112.426666-274.176h61.610667z m-107.306666-108.458667l-39.765334-101.76-38.954666 101.76z m136.533333 108.458667V374.912h58.197333v274.176z\" p-id=\"10814\"></path></svg>"
        "<svg t=\"1752290470898\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"66698\" width=\"24\" height=\"24\"><path d=\"M543.775 526.238l-83.195-201.14a44.797 44.797 0 0 1-2.944-4.543 45.885 45.885 0 0 0-5.12-7.552 26.302 26.302 0 0 0-7.295-5.312c-1.472-0.768-2.944-2.24-4.416-3.007a30.142 30.142 0 0 0-8.063-1.536c-2.176 0-3.648-1.536-5.824-1.536h-4.032a22.655 22.655 0 0 0-10.239 2.24c-1.472 0-2.176 1.536-3.648 3.007a26.302 26.302 0 0 0-7.295 5.312 41.47 41.47 0 0 0-5.12 6.784c-0.704 1.536-2.176 3.008-2.944 4.543l-85.947 208.116-51.9 124.024a38.782 38.782 0 0 0 2.88 35.966 36.094 36.094 0 0 0 30.781 16.96 36.542 36.542 0 0 0 33.598-22.656l42.366-101.305h124.984l42.366 101.305a37.182 37.182 0 0 0 20.158 20.223 35.454 35.454 0 0 0 28.095-0.576 38.398 38.398 0 0 0 19.199-49.917l-48.253-116.473a35.07 35.07 0 0 0-5.824-14.399z m-148.407-15.87l30.718-74.108 30.718 74.107h-61.372zM639.513 332.65v346.155a36.542 36.542 0 1 0 73.084 0V332.458a36.542 36.542 0 1 0-73.084 0z\" p-id=\"66699\" fill=\"#FFC000\"></path><path d=\"M168.566 463.522a81.467 81.467 0 0 0-45.437-71.996V312.3a33.15 33.15 0 0 1 17.15-29.054l353.003-199.22a35.774 35.774 0 0 1 34.238 0l354.475 199.924a33.15 33.15 0 0 1 17.15 29.054v69.052a40.382 40.382 0 0 0 40.958 39.997 39.934 39.934 0 0 0 40.958-39.997v-69.052a112.761 112.761 0 0 0-57.597-97.402L567.518 14.205a123.065 123.065 0 0 0-114.681 0L99.322 215.09a112.121 112.121 0 0 0-57.597 97.402v81.787A80.443 80.443 0 0 0 0 463.33a84.155 84.155 0 0 0 168.31 0z m855.628 124.28a84.155 84.155 0 0 0-168.31 0 80.123 80.123 0 0 0 43.965 70.396v53.82a32.894 32.894 0 0 1-17.15 28.351L528.224 940.421a34.366 34.366 0 0 1-33.534 0L140.28 740.497a32.894 32.894 0 0 1-17.151-28.35v-60.348A40.382 40.382 0 0 0 82.17 611.8a39.934 39.934 0 0 0-40.957 39.998v60.348a113.401 113.401 0 0 0 57.596 96.698l354.219 199.796a115.193 115.193 0 0 0 114.68 0l354.475-199.924a111.865 111.865 0 0 0 57.597-96.698v-53.82a81.531 81.531 0 0 0 43.965-70.397z\" p-id=\"66700\" fill=\"#FFC000\"></path></svg>\n"
        + '</button>';

    let tigeCheckMultiAgentsSingleWindowToolBtn = `<!-- chatgpt tool button-->
        <button data-label="体格检查汇报员 Physical-examination Reporter" title="Show MultiAgents result" type="button" id="tige-check-show-multi-agents-btn" class="btn btn-outline-secondary border-0 position-relative toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
<!--            <svg t="1750585411313" collapseMultiAgents viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5227" width="18" height="18"><path d="M85.333333 128a42.666667 42.666667 0 0 1 42.666667-42.666667h149.333333v85.333334H170.666667v106.666666H85.333333V128zM938.666667 128a42.666667 42.666667 0 0 0-42.666667-42.666667h-149.333333v85.333334h106.666666v106.666666h85.333334V128zM85.333333 896a42.666667 42.666667 0 0 0 42.666667 42.666667h149.333333v-85.333334H170.666667v-106.666666H85.333333v149.333333zM938.666667 896a42.666667 42.666667 0 0 1-42.666667 42.666667h-149.333333v-85.333334h106.666666v-106.666666h85.333334v149.333333zM405.333333 246.336c-63.850667 13.269333-120.512 35.285333-158.442666 52.224-50.432 22.506667-75.178667 75.072-68.842667 125.845333l35.626667 284.885334A42.666667 42.666667 0 0 0 256 746.666667h149.333333v-85.333334h-111.658666l-30.933334-247.509333c-2.218667-17.6 6.4-31.765333 18.922667-37.333333 31.893333-14.250667 75.584-31.146667 123.669333-42.709334v-87.445333zM618.666667 661.333333h111.68l30.933333-247.509333c2.197333-17.6-6.421333-31.765333-18.922667-37.333333-31.914667-14.250667-75.605333-31.146667-123.690666-42.709334v-87.445333c63.850667 13.269333 120.533333 35.285333 158.464 52.224 50.410667 22.506667 75.178667 75.072 68.821333 125.845333l-35.626667 284.885334A42.666667 42.666667 0 0 1 768 746.666667h-149.333333v-85.333334z" fill="#000000" p-id="5228"></path><path d="M378.986667 479.36l13.482666 40.490667c12.885333 38.613333 12.885333 76.8 12.864 116.693333V746.666667h213.333334v-106.666667-3.477333c0-39.893333-0.021333-78.058667 12.864-116.693334l13.482666-40.469333 80.96 26.986667-13.504 40.469333C704.426667 571.093333 704 595.84 704 640v149.333333a42.666667 42.666667 0 0 1-42.666667 42.666667H362.666667a42.666667 42.666667 0 0 1-42.666667-42.666667v-149.333333c0-44.16-0.384-68.928-8.469333-93.184l-13.504-40.469333 80.96-26.986667zM352.96 204.266667l82.773333 20.693333-42.026666 168.106667-82.773334-20.693334 42.026667-168.106666zM671.04 204.266667l-82.773333 20.693333 42.026666 168.106667 82.773334-20.693334-42.026667-168.106666z" fill="#000000" p-id="5229"></path></svg>-->
            <svg t="1752300204274" collapseMultiAgents viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="84425" width="24" height="24"><path d="M341.333333 128v85.333333H256v170.666667c0 94.293333 76.373333 170.666667 170.666667 170.666667s170.666667-76.373333 170.666666-170.666667V213.333333h-85.333333V128h128a42.666667 42.666667 0 0 1 42.666667 42.666667v213.333333a256.085333 256.085333 0 0 1-213.333334 252.458667V704a149.333333 149.333333 0 0 0 289.066667 52.778667 128 128 0 1 1 87.424 6.314666A234.666667 234.666667 0 0 1 384 704v-67.541333A256.042667 256.042667 0 0 1 170.666667 384V170.666667a42.666667 42.666667 0 0 1 42.666666-42.666667h128z" fill="#6a99d0" p-id="84426"></path></svg>
            <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>`;
    let assistCheckMultiAgentsSingleWindowToolBtn = `<!-- chatgpt tool button-->
        <button data-label="辅助检查汇报员 Assistant-check Reporter" title="Show MultiAgents result" type="button" id="assist-check-show-multi-agents-btn" class="btn btn-outline-secondary border-0 position-relative toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
<!--            <svg t="1750585477010" collapseMultiAgents viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2457" width="18" height="18"><path d="M326.4 595.2c-123.733333 0-221.866667-100.266667-221.866667-221.866667V185.6c0-14.933333 10.666667-25.6 25.6-25.6s25.6 10.666667 25.6 25.6v185.6c0 93.866667 76.8 170.666667 170.666667 170.666667s170.666667-76.8 170.666667-170.666667V185.6c0-14.933333 10.666667-25.6 25.6-25.6s25.6 10.666667 25.6 25.6v185.6c2.133333 123.733333-98.133333 224-221.866667 224z" fill="#33334B" p-id="2458"></path><path d="M550.4 925.866667c-140.8 0-256-130.133333-256-288 0-25.6 2.133333-49.066667 8.533333-74.666667 4.266667-14.933333 17.066667-23.466667 32-19.2 14.933333 4.266667 23.466667 17.066667 19.2 32-4.266667 19.2-6.4 40.533333-6.4 61.866667 0 130.133333 91.733333 236.8 202.666667 236.8 100.266667 0 185.6-87.466667 200.533333-202.666667 2.133333-14.933333 14.933333-23.466667 29.866667-23.466667 14.933333 2.133333 23.466667 14.933333 23.466667 29.866667-19.2 140.8-128 247.466667-253.866667 247.466667zM793.6 593.066667c-64 0-117.333333-53.333333-117.333333-117.333334s53.333333-117.333333 117.333333-117.333333 117.333333 53.333333 117.333333 117.333333-53.333333 117.333333-117.333333 117.333334z m0-181.333334c-36.266667 0-64 29.866667-64 64 0 36.266667 29.866667 64 64 64 36.266667 0 64-29.866667 64-64s-29.866667-64-64-64zM215.466667 211.2h-85.333334c-14.933333 0-25.6-10.666667-25.6-25.6s10.666667-25.6 25.6-25.6H213.333333c14.933333 0 25.6 10.666667 25.6 25.6s-10.666667 25.6-23.466666 25.6zM524.8 211.2h-83.2c-14.933333 0-25.6-10.666667-25.6-25.6s10.666667-25.6 25.6-25.6h83.2c14.933333 0 25.6 10.666667 25.6 25.6s-12.8 25.6-25.6 25.6z" fill="#33334B" p-id="2459"></path></svg>-->
            <svg t="1752300294927" collapseMultiAgents viewBox="0 0 1129 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="87249" width="22" height="22"><path d="M799.349811 0c-89.07776 0-173.16864 37.13024-234.67008 104.8064C503.173171 38.49216 419.118131 0 330.004531 0 148.044851 0 0.000051 156.52352 0.000051 348.83072a353.0752 353.0752 0 0 0 13.01504 95.18592h224.46592c7.86944 0 85.31456-174.9504 85.31456-174.9504 32.4096-64.86528 99.29728-51.54816 112.90112 20.41344l48.5632 256.77312 48.4352-108.10368c29.92128-65.08544 96.68608-57.10336 114.60096 13.36832l16.94208 66.49856 47.41632-61.44 13.29152-18.33984h191.09376c24.45824 0 44.2368 22.63552 44.2368 50.5088 0 27.91936-19.82464 50.5088-44.2368 50.5088h-147.95264l-59.67872 80.54272c-38.30272 52.9408-100.59776 38.4-117.376-27.56096l-10.77248-42.33216c-0.39936-1.54112-1.22368-4.88448-1.22368-4.88448l-52.86912 124.87168c-30.86848 67.1744-98.5344 55.3472-112.38912-17.83808L365.107251 394.69056l-65.57696 124.82048-12.74368 25.47712H56.396851c12.26752 21.49888 25.0112 40.87296 36.43904 58.44992 115.43552 176.40448 405.31456 393.96864 417.85856 401.92 16.30208 11.9296 35.14368 18.56512 53.93408 18.56512a86.6304 86.6304 0 0 0 53.98016-18.56512c12.53888-9.30816 301.14816-226.82624 417.85856-401.92 38.90176-59.67872 92.83584-140.58496 92.83584-254.6944C1129.338931 156.52352 981.258291 0 799.349811 0z" fill="#6a99d0" p-id="87250"></path></svg>
            <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>`;

    let titleAssistMultiAgentsSingleWindowToolBtn = `<!-- chatgpt tool button-->
        <button data-label="选题助手 Topic Assistant" title="Show MultiAgents result" type="button" id="title-assist-show-multi-agents-btn" class="btn border btn-outline-secondary position-relative toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
<!--            <svg t="1750585411313" collapseMultiAgents viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5227" width="18" height="18"><path d="M85.333333 128a42.666667 42.666667 0 0 1 42.666667-42.666667h149.333333v85.333334H170.666667v106.666666H85.333333V128zM938.666667 128a42.666667 42.666667 0 0 0-42.666667-42.666667h-149.333333v85.333334h106.666666v106.666666h85.333334V128zM85.333333 896a42.666667 42.666667 0 0 0 42.666667 42.666667h149.333333v-85.333334H170.666667v-106.666666H85.333333v149.333333zM938.666667 896a42.666667 42.666667 0 0 1-42.666667 42.666667h-149.333333v-85.333334h106.666666v-106.666666h85.333334v149.333333zM405.333333 246.336c-63.850667 13.269333-120.512 35.285333-158.442666 52.224-50.432 22.506667-75.178667 75.072-68.842667 125.845333l35.626667 284.885334A42.666667 42.666667 0 0 0 256 746.666667h149.333333v-85.333334h-111.658666l-30.933334-247.509333c-2.218667-17.6 6.4-31.765333 18.922667-37.333333 31.893333-14.250667 75.584-31.146667 123.669333-42.709334v-87.445333zM618.666667 661.333333h111.68l30.933333-247.509333c2.197333-17.6-6.421333-31.765333-18.922667-37.333333-31.914667-14.250667-75.605333-31.146667-123.690666-42.709334v-87.445333c63.850667 13.269333 120.533333 35.285333 158.464 52.224 50.410667 22.506667 75.178667 75.072 68.821333 125.845333l-35.626667 284.885334A42.666667 42.666667 0 0 1 768 746.666667h-149.333333v-85.333334z" fill="#000000" p-id="5228"></path><path d="M378.986667 479.36l13.482666 40.490667c12.885333 38.613333 12.885333 76.8 12.864 116.693333V746.666667h213.333334v-106.666667-3.477333c0-39.893333-0.021333-78.058667 12.864-116.693334l13.482666-40.469333 80.96 26.986667-13.504 40.469333C704.426667 571.093333 704 595.84 704 640v149.333333a42.666667 42.666667 0 0 1-42.666667 42.666667H362.666667a42.666667 42.666667 0 0 1-42.666667-42.666667v-149.333333c0-44.16-0.384-68.928-8.469333-93.184l-13.504-40.469333 80.96-26.986667zM352.96 204.266667l82.773333 20.693333-42.026666 168.106667-82.773334-20.693334 42.026667-168.106666zM671.04 204.266667l-82.773333 20.693333 42.026666 168.106667 82.773334-20.693334-42.026667-168.106666z" fill="#000000" p-id="5229"></path></svg>-->
            <svg t="1755176831768" collapseMultiAgents  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3637" width="22" height="22"><path d="M333.6 412.5H158.7c-0.6 0-1.1-0.5-1.1-1.1v-9.5c0-0.6 0.5-1.1 1.1-1.1h174.9c0.6 0 1.1 0.5 1.1 1.1v9.5c0 0.6-0.5 1.1-1.1 1.1zM333.6 527.5H158.7c-0.6 0-1.1-0.5-1.1-1.1v-9.5c0-0.6 0.5-1.1 1.1-1.1h174.9c0.6 0 1.1 0.5 1.1 1.1v9.5c0 0.6-0.5 1.1-1.1 1.1zM333.6 642.5H158.7c-0.6 0-1.1-0.5-1.1-1.1v-9.5c0-0.6 0.5-1.1 1.1-1.1h174.9c0.6 0 1.1 0.5 1.1 1.1v9.5c0 0.6-0.5 1.1-1.1 1.1zM736.7 725.9L602.1 853.7c-2.3 2.2-6 2.1-8.2-0.2-2.2-2.3-2.1-6 0.2-8.2l134.6-127.8c2.3-2.2 6-2.1 8.2 0.2 2.3 2.3 2.2 6-0.2 8.2zM868.1 601l-49.6 47.2c-0.4 0.4-1.1 0.4-1.6 0l-6.5-6.9c-0.4-0.4-0.4-1.1 0-1.6l49.6-47.2c0.4-0.4 1.1-0.4 1.6 0l6.5 6.9c0.4 0.5 0.4 1.2 0 1.6zM791 674.3l-11.1 10.5c-0.4 0.4-1.1 0.4-1.6 0l-6.5-6.9c-0.4-0.4-0.4-1.1 0-1.6l11.1-10.5c0.4-0.4 1.1-0.4 1.6 0l6.5 6.9c0.4 0.5 0.4 1.2 0 1.6z" fill="#231815" p-id="3638"></path><path d="M500.7 914.3c0-7-5.6-12.6-12.6-12.6H118.9c-18.2 0-33.1-13.7-33.1-30.6V136.2c0-16.9 14.8-30.6 33.1-30.6h488.2c18.2 0 33.1 13.7 33.1 30.6v181c0 7.5 6.1 13.6 13.6 13.6s13.6-6.1 13.6-13.6v-181c0-30.8-27-55.9-60.3-55.9H118.9c-33.2 0-60.3 25.1-60.3 55.9V871c0 30.8 27 55.9 60.3 55.9h369.2c7 0.1 12.6-5.6 12.6-12.6z" fill="#231815" p-id="3639"></path><path d="M947 670.8L669.7 385.3c-18.1-19.1-41.2-14.8-71.1-20.4-11.2-2.1-155.3-11-211.8-6.2-9.5 0.8-17.1 8.2-18.1 17.7-6.1 55.2 0.3 193.4 0.6 200.6 1.1 38.1 2.7 54.9 20.8 73.9l277.3 285.4c21.2 22.3 58.1 21.8 82.2-1.1l192.3-182.5c24-22.8 26.4-59.6 5.1-81.9z m-22.5 63.7L732.2 917c-13.2 12.6-33.4 12.8-45.1 0.6L409.7 632.1c-0.7-0.8-1.4-1.6-2-2.4-11.3-14.8-22.3-172.1-14-229 1.3-9.2 8.7-16.3 17.9-17.4 57.8-6.9 219.2 7 233.6 16.7 1.7 1.1 3.3 2.5 4.7 4l277.3 285.4c11.7 12.4 10.5 32.6-2.7 45.1z" fill="#231815" p-id="3640"></path><path d="M501.7 484.6m-45 0a45 45 0 1 0 90 0 45 45 0 1 0-90 0Z" fill="#231815" p-id="3641"></path><path d="M199.6 177.5c6.6 4.8 10.3 12.4 11.2 22.6h-14.2c-1.3-6.2-3.8-10.6-7.4-13.1-3.6-2.7-8.9-4.1-16-4.1-6.1 0-10.9 0.9-14.2 2.8-4 2.1-6 5.5-6 10.3 0 4.2 2.3 7.5 7 10 2.3 1.3 7.7 3.2 16.3 5.8 13 4 21.2 7.1 24.6 9.2 8.1 4.9 12.1 11.7 12.1 20.3 0 8.3-3.3 14.9-9.9 19.9-6.6 4.7-15.8 7.1-27.6 7.1-11.3 0-20.3-2.3-26.8-6.8-7.7-5.5-12-14.2-12.8-26h14.2c1.1 7.5 3.7 12.8 7.9 15.9 3.9 2.9 9.7 4.3 17.5 4.3 6.9 0 12.6-1.2 17-3.7 4.2-2.4 6.3-5.7 6.3-9.9 0-5.2-3-9.3-8.9-12.4-2.2-1.1-8.4-3.2-18.7-6.3-11.7-3.8-18.9-6.4-21.6-7.8-7.2-4.3-10.8-10.6-10.8-18.8 0-8.2 3.5-14.7 10.4-19.5 6.6-4.5 14.9-6.7 24.9-6.7 11 0 19.5 2.3 25.5 6.9zM224.9 198.3h13.9v41.4c0 5.9 1.2 10.1 3.7 12.6 2.5 2.7 6.4 4.1 11.7 4.1 3.5 0 6.9-1.5 10.1-4.5 3.2-3.1 5.3-7.1 6.6-12.1v-41.6h13.9v68h-13.9V257c-5.8 7.4-12.9 11-21.4 11-16.4 0-24.6-9.2-24.6-27.5v-42.2zM300.8 170.6h13.9v37.9c5.5-8 12.4-12 20.8-12 9.7 0 17.4 3.6 23 10.6 5.2 6.7 7.8 14.9 7.8 24.9 0 10.4-2.6 18.9-7.9 25.5-5.8 7.1-13.6 10.7-23.5 10.7-9.2 0-16.2-3.3-21-10v8.2h-13v-95.8z m18.9 43.4c-3.6 4.4-5.4 10.3-5.4 17.8v1.2c0 6.8 1.4 12.3 4.3 16.7 3.3 4.8 8 7.2 14.1 7.2 6.7 0 11.8-2.5 15.1-7.4 2.7-4.4 4.1-10.2 4.1-17.5 0-7.5-1.4-13.3-4.3-17.2-3.2-4.6-8.3-7-15.3-7-5.3 0-9.5 2.1-12.6 6.2zM382.7 198.3h13.9v74.6c0 13-6.9 19.5-20.6 19.5h-6.4V281h5.3c5.3 0 7.9-2.8 7.9-8.5v-74.2z m13.9-24.6c1.8 1.7 2.8 3.9 2.8 6.7 0 2.7-0.9 5-2.8 6.8-2 1.8-4.3 2.6-7 2.6-2.5 0-4.8-0.9-6.7-2.6-1.9-1.8-2.9-4.1-2.9-6.8 0-2.8 1-5 2.9-6.7 1.8-1.8 4-2.6 6.7-2.6 3 0 5.3 0.9 7 2.6zM469.6 207.8c5.3 6.9 8.1 16.4 8.2 28.4h-51.5c0.5 6.8 2.3 11.8 5.4 15.3 3.2 3.5 7.6 5.3 13 5.3 4.8 0 8.8-1.1 11.8-3.4 2.2-1.7 4.2-4.6 6.2-8.8h13.9c-1.7 6.5-4.8 11.8-9.3 15.9-6 5.2-13.5 7.8-22.5 7.8-10.1 0-18-3.1-23.8-9.3-6.3-6.6-9.5-15.4-9.5-26.6 0-10.2 3-18.6 8.9-25.4 5.8-6.9 13.7-10.4 23.8-10.4 11.3-0.1 19.7 3.7 25.4 11.2z m-37.5 4.7c-3 3.2-4.9 7.5-5.7 13.2h36.7c-1.3-11.8-7.5-17.8-18.5-17.8-5.2 0-9.4 1.6-12.5 4.6zM540.8 202.4c5.3 4.3 8.7 10.6 10 18.9H537c-1-4.7-2.8-8.1-5.7-10.1-2.8-2.2-6.6-3.3-11.4-3.3-5.8 0-10.3 2.2-13.5 6.4-3.3 4.1-5 10.1-5 17.9 0 7.7 1.6 13.7 4.9 18 3.1 4.3 7.6 6.4 13.5 6.4 10.3 0 16.2-5.2 17.5-15.5H551c-1.6 9-5 15.8-10.4 20.4-5.3 4.4-12.4 6.6-21 6.6-10.3 0-18.4-3.4-24.2-10.3-5.6-6.5-8.4-15-8.4-25.5 0-10.3 2.8-18.7 8.3-25.3 6-7.1 14.2-10.6 24.6-10.6 8.6 0.1 15.6 2.1 20.9 6zM583.6 198.3h15.5v11.6h-15.5v39.4c0 1.8 0.4 3.1 1.2 4.1 0.9 0.9 2.1 1.3 3.7 1.3h8.9v11.6h-11.2c-5.9 0-10.1-1.5-12.8-4.6-2.5-2.8-3.8-6.9-3.8-12.4v-39.4H557v-11.6h12.6v-16.2l13.9-5.8v22z" fill="#231815" p-id="3642"></path></svg><span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>`;
    let writingAssistMultiAgentsSingleWindowToolBtn = `<!-- chatgpt tool button-->
        <button data-label="写作助手 Writing Assistant" title="Show MultiAgents result" type="button" id="writing-assist-show-multi-agents-btn" class="btn border btn-outline-secondary position-relative toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
<!--            <svg t="1750585477010" collapseMultiAgents viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2457" width="18" height="18"><path d="M326.4 595.2c-123.733333 0-221.866667-100.266667-221.866667-221.866667V185.6c0-14.933333 10.666667-25.6 25.6-25.6s25.6 10.666667 25.6 25.6v185.6c0 93.866667 76.8 170.666667 170.666667 170.666667s170.666667-76.8 170.666667-170.666667V185.6c0-14.933333 10.666667-25.6 25.6-25.6s25.6 10.666667 25.6 25.6v185.6c2.133333 123.733333-98.133333 224-221.866667 224z" fill="#33334B" p-id="2458"></path><path d="M550.4 925.866667c-140.8 0-256-130.133333-256-288 0-25.6 2.133333-49.066667 8.533333-74.666667 4.266667-14.933333 17.066667-23.466667 32-19.2 14.933333 4.266667 23.466667 17.066667 19.2 32-4.266667 19.2-6.4 40.533333-6.4 61.866667 0 130.133333 91.733333 236.8 202.666667 236.8 100.266667 0 185.6-87.466667 200.533333-202.666667 2.133333-14.933333 14.933333-23.466667 29.866667-23.466667 14.933333 2.133333 23.466667 14.933333 23.466667 29.866667-19.2 140.8-128 247.466667-253.866667 247.466667zM793.6 593.066667c-64 0-117.333333-53.333333-117.333333-117.333334s53.333333-117.333333 117.333333-117.333333 117.333333 53.333333 117.333333 117.333333-53.333333 117.333333-117.333333 117.333334z m0-181.333334c-36.266667 0-64 29.866667-64 64 0 36.266667 29.866667 64 64 64 36.266667 0 64-29.866667 64-64s-29.866667-64-64-64zM215.466667 211.2h-85.333334c-14.933333 0-25.6-10.666667-25.6-25.6s10.666667-25.6 25.6-25.6H213.333333c14.933333 0 25.6 10.666667 25.6 25.6s-10.666667 25.6-23.466666 25.6zM524.8 211.2h-83.2c-14.933333 0-25.6-10.666667-25.6-25.6s10.666667-25.6 25.6-25.6h83.2c14.933333 0 25.6 10.666667 25.6 25.6s-12.8 25.6-25.6 25.6z" fill="#33334B" p-id="2459"></path></svg>-->
           <svg t="1755177490406" collapseMultiAgents  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7929" width="22" height="22"><path d="M640 795.136A155.136 155.136 0 0 0 795.136 640h31.04a155.136 155.136 0 0 0 155.136 155.136v31.04a155.136 155.136 0 0 0-155.136 155.136h-31.04A155.136 155.136 0 0 0 640 826.24v-31.04zM296.064 598.72c-9.92 26.624-18.304 51.2-25.792 76.096 40.96-29.76 89.6-48.64 145.792-55.68C523.328 605.824 618.56 535.04 666.88 446.08L604.736 384l60.16-60.352 42.752-42.752c18.304-18.304 39.04-52.224 60.928-100.992-238.72 36.992-384.768 183.104-472.512 418.88z m429.248-214.848l42.688 42.624c-42.688 128-170.688 256-341.312 277.376-113.92 14.208-184.96 92.416-213.44 234.624H128c42.688-256 128-853.312 768-853.312-42.624 127.872-85.248 213.184-127.872 255.872l-42.816 42.88z" p-id="7930" fill="#707070"></path></svg>
           <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>`;

    let assessmentAssistMultiAgentsSingleWindowToolBtn = `<!-- chatgpt tool button-->
        <button data-label="评估助手 Assessment Assistant" title="Show MultiAgents result" type="button" id="assessment-assist-show-multi-agents-btn" class="btn border btn-outline-secondary  position-relative toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
<!--            <svg t="1750585477010" collapseMultiAgents viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2457" width="18" height="18"><path d="M326.4 595.2c-123.733333 0-221.866667-100.266667-221.866667-221.866667V185.6c0-14.933333 10.666667-25.6 25.6-25.6s25.6 10.666667 25.6 25.6v185.6c0 93.866667 76.8 170.666667 170.666667 170.666667s170.666667-76.8 170.666667-170.666667V185.6c0-14.933333 10.666667-25.6 25.6-25.6s25.6 10.666667 25.6 25.6v185.6c2.133333 123.733333-98.133333 224-221.866667 224z" fill="#33334B" p-id="2458"></path><path d="M550.4 925.866667c-140.8 0-256-130.133333-256-288 0-25.6 2.133333-49.066667 8.533333-74.666667 4.266667-14.933333 17.066667-23.466667 32-19.2 14.933333 4.266667 23.466667 17.066667 19.2 32-4.266667 19.2-6.4 40.533333-6.4 61.866667 0 130.133333 91.733333 236.8 202.666667 236.8 100.266667 0 185.6-87.466667 200.533333-202.666667 2.133333-14.933333 14.933333-23.466667 29.866667-23.466667 14.933333 2.133333 23.466667 14.933333 23.466667 29.866667-19.2 140.8-128 247.466667-253.866667 247.466667zM793.6 593.066667c-64 0-117.333333-53.333333-117.333333-117.333334s53.333333-117.333333 117.333333-117.333333 117.333333 53.333333 117.333333 117.333333-53.333333 117.333333-117.333333 117.333334z m0-181.333334c-36.266667 0-64 29.866667-64 64 0 36.266667 29.866667 64 64 64 36.266667 0 64-29.866667 64-64s-29.866667-64-64-64zM215.466667 211.2h-85.333334c-14.933333 0-25.6-10.666667-25.6-25.6s10.666667-25.6 25.6-25.6H213.333333c14.933333 0 25.6 10.666667 25.6 25.6s-10.666667 25.6-23.466666 25.6zM524.8 211.2h-83.2c-14.933333 0-25.6-10.666667-25.6-25.6s10.666667-25.6 25.6-25.6h83.2c14.933333 0 25.6 10.666667 25.6 25.6s-12.8 25.6-25.6 25.6z" fill="#33334B" p-id="2459"></path></svg>-->
           <svg t="1755177565781" collapseMultiAgents  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="721" width="22" height="22"><path d="M163.555556 117.333333h696.888888v789.333334h-696.888888z" fill="#FFFFFF" p-id="722"></path><path d="M832 960h-640c-46.933333 0-85.333333-38.4-85.333333-85.333333v-725.333334c0-46.933333 38.4-85.333333 85.333333-85.333333h640c46.933333 0 85.333333 38.4 85.333333 85.333333v725.333334c0 46.933333-38.4 85.333333-85.333333 85.333333z m-640-839.111111c-15.644444 0-28.444444 12.8-28.444444 28.444444v725.333334c0 15.644444 12.8 28.444444 28.444444 28.444444h640c15.644444 0 28.444444-12.8 28.444444-28.444444v-725.333334c0-15.644444-12.8-28.444444-28.444444-28.444444h-640z" fill="#194F82" p-id="723"></path><path d="M219.022222 177.777778h583.111111v668.444444h-583.111111z" fill="#ffffff" p-id="724" data-spm-anchor-id="a313x.manage_type_mylikes.0.i0.62e23a81e6PVMB" class="selected"></path><path d="M483.555556 640c0 15.644444-12.8 28.444444-28.444445 28.444444h-113.777778c-15.644444 0-28.444444-12.8-28.444444-28.444444s12.8-28.444444 28.444444-28.444444h113.777778c15.644444 0 28.444444 12.8 28.444445 28.444444zM696.888889 753.777778c0 15.644444-12.8 28.444444-28.444445 28.444444h-327.111111c-15.644444 0-28.444444-12.8-28.444444-28.444444s12.8-28.444444 28.444444-28.444445h327.111111c15.644444 0 28.444444 12.8 28.444445 28.444445zM706.844444 536.177778l-173.511111-280.888889c-4.977778-8.533333-14.933333-13.511111-24.177777-13.511111-9.955556 0-19.2 5.688889-24.177778 14.222222l-167.822222 284.444444c-7.822222 13.511111-3.555556 31.288889 9.955555 39.111112 4.266667 2.844444 9.244444 4.266667 14.222222 4.266666 9.955556 0 19.2-4.977778 24.177778-14.222222l46.933333-78.933333h199.111112l46.933333 75.377777c8.533333 13.511111 25.6 17.777778 39.111111 9.244445 13.511111-7.822222 17.777778-25.6 9.244444-39.111111z m-260.977777-102.4l64-108.8 66.844444 108.8h-130.844444zM696.888889 256c0-15.644444-12.8-28.444444-28.444445-28.444444s-28.444444 12.8-28.444444 28.444444c-15.644444 0-28.444444 12.8-28.444444 28.444444s12.8 28.444444 28.444444 28.444445c0 15.644444 12.8 28.444444 28.444444 28.444444s28.444444-12.8 28.444445-28.444444c15.644444 0 28.444444-12.8 28.444444-28.444445s-12.8-28.444444-28.444444-28.444444z" fill="#194F82" p-id="725"></path></svg>
           <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>`;


    /*let medicalScaffoldMultiAgentsSingleWindowToolBtn = `<!-- chatgpt tool button-->
        <button title="Show MultiAgents result" type="button" id="medical-scaffold-show-multi-agents-btn" class="btn btn-outline-secondary border position-relative" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
            <svg fill="#A1C4FD" width="18" height="18" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg"><title>chatgpt icon</title><path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"/></svg>
            <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>`;
    let tigeCheckMultiAgentsSingleWindowToolBtn = `<!-- chatgpt tool button-->
        <button title="Show MultiAgents result" type="button" id="tige-check-show-multi-agents-btn" class="btn btn-outline-secondary border position-relative" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
            <svg fill="#A1C4FD" width="18" height="18" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg"><title>chatgpt icon</title><path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"/></svg>
            <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>`;
    let assistCheckMultiAgentsSingleWindowToolBtn = `<!-- chatgpt tool button-->
        <button title="Show MultiAgents result" type="button" id="assist-check-show-multi-agents-btn" class="btn btn-outline-secondary border position-relative" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
            <svg fill="#A1C4FD" width="18" height="18" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg"><title>chatgpt icon</title><path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"/></svg>
            <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText}</span></span>
        </button>`;*/
    let chatgptAssistantToolBtn = '<!-- chatgpt tool button-->' +
        '<button title="Show Assistant result" type="button" id="show-assistant-btn" class="btn btn-outline-secondary border" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">' +
        '<svg t="1710211678330" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="4506" width="18" height="18"><title>patient icon</title><path d="M639.904 594.176c10.816-8.608 21.024-18.336 30.496-29.152C712.416 517.024 736 451.904 736 384c0-33.6-5.792-66.88-17.056-97.952a261.056 261.056 0 0 0-48.544-83.072C628.384 154.976 571.424 128 512 128c-59.424 0-116.384 26.976-158.4 74.976C311.584 250.976 288 316.096 288 384s23.616 133.024 65.6 181.024c9.472 10.784 19.68 20.544 30.496 29.12-125.76 37.024-221.44 127.04-248.416 237.856A270.048 270.048 0 0 0 128 896h768c0-21.92-2.656-43.328-7.68-64-27.008-110.784-122.688-200.832-248.448-237.824z m-238.144-71.296a187.968 187.968 0 0 1-20.48-28.48c3.424-0.32 7.072-0.64 10.976-1.088a577.536 577.536 0 0 0 94.528-18.56c58.24-16.64 127.776-46.944 184.928-102.496 0.192 3.904 0.288 7.808 0.288 11.744 0 53.472-18.656 103.328-49.76 138.88C591.36 558.144 551.456 576 512 576c-39.456 0-79.36-17.856-110.24-53.12zM360.32 431.68l-3.2 0.16a226.624 226.624 0 0 1-5.056-51.488c23.264-2.88 53.504-8.128 86.752-17.6 60.32-17.248 132.736-49.152 190.944-108.512 9.536 12.48 17.792 26.496 24.384 41.824-50.016 64.832-121.92 99.136-184.896 117.12-32.896 9.408-62.56 14.112-83.968 16.48-10.656 1.152-19.2 1.76-24.96 2.016z m60.928-130.496c-21.184 6.08-41.024 10.176-58.176 12.96a198.88 198.88 0 0 1 38.72-69.056C432.64 209.856 472.544 192 512 192c23.872 0 47.904 6.528 69.984 19.52-47.488 47.424-107.328 74.432-160.768 89.696zM305.12 700.832C363.2 743.04 434.72 768 512 768s148.8-24.96 206.848-67.168c50.144 34.496 85.984 80.768 102.656 131.168H202.496c16.64-50.4 52.48-96.672 102.624-131.2z m64.576-34.368C411.68 649.664 459.648 640 512 640c52.32 0 100.288 9.664 142.304 26.464A286.56 286.56 0 0 1 512 704a286.592 286.592 0 0 1-142.304-37.536z" fill="#2c2c2c" p-id="4507"></path></svg>' +
        '</button>';
    let toeflAssistantToolBtn = '<!-- chatgpt tool button-->' +
        '<button title="Show TOEFL Assistant result" type="button" id="show-toefl-assistant-btn" class="btn btn-outline-secondary border" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">' +
        ' <svg t="1685773401308" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4258" width="18" height="18"><path d="M610.492452 286.109123c38.099529-29.799632 62.29923-76.399055 61.49924-128.698409C670.591709 69.611799 597.692611-1.087327 509.893696 0.01266 422.494777 1.112646 351.995648 72.311766 351.995648 160.010682c0 51.199367 24.099702 96.798803 61.49924 126.098441C366.795465 317.808731 335.995846 371.308069 335.995846 432.007319c0 17.699781 14.299823 31.999604 31.999604 31.999604h287.99644c17.699781 0 31.999604-14.299823 31.999604-31.999604 0-60.69925-30.69962-114.198588-77.499042-145.898196zM415.994857 160.010682c0-52.899346 43.099467-95.998813 95.998813-95.998813s95.998813 43.099467 95.998813 95.998813-43.099467 95.998813-95.998813 95.998813-95.998813-43.099467-95.998813-95.998813z m-0.099999 239.997033c-5.69993 0-9.599881-5.799928-7.399908-11.099863 5.599931-13.299836 13.699831-25.599684 24.1997-36.099554C453.994387 331.60856 482.09404 320.008704 511.99367 320.008704s57.999283 11.599857 79.199021 32.799594c10.49987 10.49987 18.699769 22.799718 24.199701 36.099554 2.199973 5.299934-1.59998 11.099863-7.399909 11.099863H415.894858zM946.488298 846.102199c38.099529-29.799632 62.29923-76.399055 61.49924-128.698408-1.399983-87.798915-74.299081-158.49804-161.997997-157.398055-87.498918 1.099986-157.998047 72.299106-157.998047 159.998022 0 51.199367 24.099702 96.798803 61.49924 126.098441C702.791311 877.801807 671.991692 931.301146 671.991692 992.000396c0 17.699781 14.299823 31.999604 31.999604 31.999604h287.99644c17.699781 0 31.999604-14.299823 31.999604-31.999604 0-60.69925-30.69962-114.198588-77.499042-145.898197zM751.990703 720.003758c0-52.899346 43.099467-95.998813 95.998813-95.998813s95.998813 43.099467 95.998813 95.998813-43.099467 95.998813-95.998813 95.998814-95.998813-43.099467-95.998813-95.998814z m-0.099999 239.997033c-5.69993 0-9.599881-5.799928-7.399908-11.099863 5.599931-13.299836 13.699831-25.599684 24.1997-36.099553C789.990233 891.601637 818.089886 880.00178 847.989516 880.00178s57.999283 11.599857 79.199021 32.799595c10.49987 10.49987 18.699769 22.799718 24.199701 36.099553 2.199973 5.299934-1.59998 11.099863-7.399909 11.099863H751.890704zM274.496606 846.102199c38.099529-29.799632 62.29923-76.399055 61.49924-128.698408-1.399983-87.798915-74.299081-158.49804-161.997997-157.398055-87.498918 1.099986-157.998047 72.299106-157.998047 159.998022 0 51.199367 24.099702 96.798803 61.49924 126.098441C30.799619 877.801807 0 931.301146 0 992.000396c0 17.699781 14.299823 31.999604 31.999604 31.999604h287.99644c17.699781 0 31.999604-14.299823 31.999604-31.999604 0-60.69925-30.69962-114.198588-77.499042-145.898197zM79.999011 720.003758c0-52.899346 43.099467-95.998813 95.998813-95.998813s95.998813 43.099467 95.998813 95.998813-43.099467 95.998813-95.998813 95.998814-95.998813-43.099467-95.998813-95.998814z m-0.099999 239.997033c-5.69993 0-9.599881-5.799928-7.399908-11.099863 5.599931-13.299836 13.699831-25.599684 24.1997-36.099553C117.998541 891.601637 146.098194 880.00178 175.997824 880.00178s57.999283 11.599857 79.199021 32.799595c10.49987 10.49987 18.699769 22.799718 24.199701 36.099553 2.199973 5.299934-1.59998 11.099863-7.399909 11.099863H79.899012zM635.292146 720.003758c-5.899927 10.299873-16.699794 15.999802-27.699658 15.999803-5.399933 0-10.899865-1.399983-15.999802-4.299947L511.99367 685.804181l-79.599016 45.899433c-15.299811 8.799891-34.899569 3.599955-43.69946-11.699856-2.899964-4.999938-4.299947-10.49987-4.299946-15.999802 0-11.099863 5.69993-21.79973 15.999802-27.699657l79.599016-45.899433V544.005934c0-17.699781 14.299823-31.999604 31.999604-31.999604 8.799891 0 16.799792 3.599955 22.599721 9.399884 5.799928 5.799928 9.399884 13.799829 9.399883 22.59972v86.298933l79.599016 45.899433c15.299811 8.89989 20.499747 28.499648 11.699856 43.799458z" p-id="4259"></path></svg>' +
       '</button>';
    let chatgptAssistantTeacherToolBtn = `<!-- chatgpt tool button-->
        <button title="Show Assistant Scaffold result" type="button" id="show-assistant-scaffold-btn" class="btn btn-outline-secondary border" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
        <svg t="1713954810237" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="18" height="18"><title>scaffold teacher icon</title>
            <path d="M511.83 795.59l-46.4-80.82 93.2 0.23z" fill="#2c2c2c" p-id="3341" data-spm-anchor-id="a313x.search_index.0.i1.46d93a810kQjDt" className="selected"></path>
            <path d="M511.83 556.45l-46.4 158.37 93.2-0.53z" fill="#2c2c2c" p-id="3342" data-spm-anchor-id="a313x.search_index.0.i0.46d93a810kQjDt" className="selected"></path>
            <path d="M723.88 929.64H300.17c-50.9 0-98.87-19.94-135.08-56.15-36.21-36.21-56.15-84.18-56.15-135.08 0-50.9 19.94-98.87 56.15-135.08 36.21-36.21 84.18-56.15 135.08-56.15h423.71c50.9 0 98.87 19.94 135.08 56.15 36.21 36.21 56.15 84.18 56.15 135.08 0 50.9-19.94 98.87-56.15 135.08-36.2 36.21-84.18 56.15-135.08 56.15zM300.17 607.18c-72.36 0-131.23 58.87-131.23 131.23 0 72.36 58.87 131.23 131.23 131.23h423.71c72.36 0 131.23-58.87 131.23-131.23 0-72.36-58.87-131.23-131.23-131.23H300.17zM512.03 513.91C396.77 513.91 303 420.14 303 304.88S396.77 95.85 512.03 95.85c50.32 0 177.71 0.24 178.99 0.25l29.92 0.06 0.02 29.92c0 1.31 0.1 131.34 0.1 178.81 0 115.25-93.77 209.02-209.03 209.02z m0-358.06C429.85 155.85 363 222.7 363 304.88s66.85 149.03 149.03 149.03 149.03-66.86 149.03-149.03c0-33.29-0.05-107.23-0.08-148.84-41.08-0.08-113.83-0.19-148.95-0.19z" p-id="3343"></path>
        </svg>
           <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none" style="top:12px; left:-80px; height: 30px; width: 160px; font-size: 0.85em;">${scaffoldingUnreadMessageText}<span class="visually-hidden">${scaffoldingUnreadMessageText} 
        </span></span>
        </button>`;


    let dictionaryToolBtn = `<!-- dictionary tool button-->
        <button data-label="${dictionaryToolDataLabel}" title="Show Dictionary result" type="button" id="show-dictionary-btn" class="btn btn-outline-secondary border toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
            <!-- <svg t="1683367248473" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3474" width="18" height="18"><title>Dictionary icon</title><path d="M960 808.882V64.445c-3-0.156-6.145-0.406-8.926-0.406-210.26 0-548.538-0.125-758.799 0.25-13.908 0.031-28.333 2.125-41.6 6.157-53.413 16.283-86.776 63.133-86.792 120.421-0.063 240.343-0.032 405.676-0.016 646.019 0 3.063 0.031 6.126 0.125 9.22 1.344 43.006 16.924 89.465 52.116 116.594 24.738 19.095 53.179 28.3 84.714 28.3H959v-3.689c1 0.063 1 0.063 1 0.125v-68.29c-19-11.095-32.004-31.504-32.004-55.132S941 819.978 960 808.882zM881.735 928H191.899c-35.348 0-64.008-28.652-64.008-64s28.66-64 64.008-64h689.836c-10.986 19-17.753 40.559-17.753 64 0 23.439 6.767 45 17.753 64zM896 736h-11.718c-175.662 0-479.333 0.046-654.996-0.329-35.098-0.063-70.286-0.267-102.286 20.799v-11.627c0-199.806 0.398-353.606-0.445-553.413-0.141-34.691 23.991-65.594 67.122-65.469 188.241 0.469 504.488 0.039 692.715 0.039H896v610z" p-id="3475"></path><path d="M256 256h512v64H256v-64zM256 480h512v64H256v-64z" p-id="3476"></path></svg> -->
            <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 117.17 122.88"><defs><style>.cls-1{fill-rule:evenodd;}</style></defs><title>translation</title><path class="cls-1" d="M23.46,98.8l24-7.22-4.24,7.8c8.69,7.36,17.64,9.33,27.58,5.08-9.36,14.77-23.85,16.47-36,10.47l-4.33,7.95-7-24.08ZM23,35.33h9.93V32.77a.33.33,0,0,1,.33-.33H37.8a.33.33,0,0,1,.33.33v2.56h10a.33.33,0,0,1,.33.33v4.75a.32.32,0,0,1-.33.32H46.27a21.5,21.5,0,0,1-.91,4,25,25,0,0,1-1.73,4A32,32,0,0,1,41.55,52c-.72,1-1.51,2-2.35,3a40.33,40.33,0,0,0,4.63,4.61l0,0a55.4,55.4,0,0,0,5.82,4.28.32.32,0,0,1,.1.45l-2.35,3.68a.35.35,0,0,1-.46.1,60.53,60.53,0,0,1-6.24-4.58,44.58,44.58,0,0,1-5-4.9c-1.29,1.23-2.65,2.43-4.07,3.58-1.61,1.29-3.29,2.54-5,3.73a.33.33,0,0,1-.46-.08l-2.47-3.59a.31.31,0,0,1,.08-.45c1.69-1.17,3.34-2.4,4.91-3.68,1.39-1.13,2.72-2.3,3.95-3.51a39.71,39.71,0,0,1-3.15-5.61,44.72,44.72,0,0,1-2.43-6.63.34.34,0,0,1,.23-.4l4.21-1.18a.32.32,0,0,1,.4.23,39.2,39.2,0,0,0,1.92,5.38,37.33,37.33,0,0,0,2.32,4.39c.55-.69,1.07-1.37,1.55-2.06s1.06-1.64,1.51-2.48a19.68,19.68,0,0,0,1.29-2.91,18.87,18.87,0,0,0,.69-2.69H23a.32.32,0,0,1-.33-.32V35.66a.33.33,0,0,1,.33-.33Zm49.5,4.26h32.38a12.38,12.38,0,0,1,12.33,12.34V78a12.38,12.38,0,0,1-12.33,12.34h-1l-.66,9.89a2.62,2.62,0,0,1-4.19,2L83.25,90.35H63.18A12.38,12.38,0,0,1,50.86,78.53H38.67L20.35,93A4.57,4.57,0,0,1,13,89l.8-10.55a14.92,14.92,0,0,1-9.38-4.35l-.28-.3A14.94,14.94,0,0,1,0,63.56V35.71a15,15,0,0,1,15-15H57.49a14.91,14.91,0,0,1,10.57,4.39l.28.29a15,15,0,0,1,4.12,10.28v3.88Zm31.69-14.72L79.31,28.23l5.41-7c-7.42-8.63-16-12-26.43-9.35C69.85-1.26,84.43-.67,95.52,7.17L101,0l3.11,24.87ZM91.58,70.09h-8l-1.48,5H74.89c2.4-6.37,5.18-14,7.59-20.4.87-2.3,1.86-6.12,5-6.12s4.36,3.5,5.27,5.92l7.71,20.71H93.1l-1.52-5.14Zm-1.21-4.9-2.79-8.78-2.8,8.78ZM15,25.32H57.49A10.43,10.43,0,0,1,67.88,35.71V63.56A10.42,10.42,0,0,1,57.49,74H37.09L17.53,89.37,18.69,74H15A10.41,10.41,0,0,1,4.58,63.56V35.71A10.42,10.42,0,0,1,15,25.32Z"/></svg>
        </button>`;
    let teacherChatBtn = '<!-- handler with teacher button-->' +
        '<button title="Show teacher handler result" type="button" id="show-teacherchat-btn" class="btn btn-outline-secondary border" style="height: 30px;  width: 30px; padding: 1px 6px;margin-bottom: 10px;">' +
        '<svg t="1681352352200" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2831" width="18" height="18"><title>TeacherChat icon</title>' + 
        '<path d="M528.299836 658.129008l0.981918 21.464723-12.683573 20.979375 38.897973 169.908252-54.953732 26.705359-54.953732-26.705359 38.892362-169.908252-12.683573-20.979375 0.976307-21.464723C496.985074 656.7936 504.085742 656.7936 528.299836 658.129008L528.299836 658.129008z" p-id="2832"></path>' + 
        '<path d="M489.847934 67.581195l538.478115 0c16.810433 0 32.111518 6.873425 43.198773 17.960679 11.087255 11.045173 17.963485 26.346258 17.963485 43.198773l0 336.275989c0 16.768351-6.87623 32.06663-17.963485 43.159496l-0.047693 0.039277 0 0.047693c-11.134948 11.047978-26.38834 17.924208-43.153885 17.924208l-238.044932 0-84.223299 66.170038-30.024241 23.594082 5.76526-37.700033 7.005282-46.035112 29.895189 4.480351-1.240022 8.295803 138.06606-108.485085 18.715353 23.72594-45.415101 35.705337 199.486422 0c8.517436 0 16.232504-3.456351 21.821019-9.047671l0.047693-0.047693c5.549238-5.543627 9.008395-13.306389 9.008395-21.821019L1059.186323 128.743452c0-8.472548-3.459156-16.232504-9.056088-21.821019-5.633403-5.588515-13.351277-9.092559-21.821019-9.092559L489.847934 97.829874c-8.51463 0-16.277392 3.459156-21.865907 9.047671-5.588515 5.633403-9.047671 13.348471-9.047671 21.865907l0 21.997764-30.248679 0L428.685677 128.743452c0-16.810433 6.873425-32.06663 17.918597-43.153885l0.089775-0.044888C457.781304 74.457425 473.037501 67.581195 489.847934 67.581195L489.847934 67.581195z" p-id="2833"></path>' + 
        '<path d="M676.039189 374.587616c10.374663-138.110948-9.092559-217.635068-174.660734-195.457753-56.190948 7.496241-117.221348-9.002784-152.037348 16.499025-43.776701 41.293852-46.879562 103.252866-34.995551 175.945644-2.623123 1.419573-5.277107 3.013085-7.891814 4.833841l-7.802038 5.277107-0.137468 9.359079c-0.401184 24.216899 2.623123 44.663233 9.140252 60.317808 5.9392 14.235003 14.678268 24.839715 26.385534 31.224986 13.9264 47.45749 33.935079 83.070247 58.95154 108.706718 27.274871 27.945381 60.096175 43.818784 97.212668 50.077808l3.33291 0.530236 3.327299-0.667704c41.114301-8.691375 73.935605-25.27737 100.107923-52.953425 24.256175-25.639277 42.357129-60.26731 55.663518-106.490389 11.266805-6.564822 19.694466-17.253699 25.414838-31.359649 6.253414-15.567605 9.134641-35.657644 8.736263-59.386389l-0.134663-9.359079-7.804844-5.277107C677.899222 375.740668 676.970608 375.165545 676.039189 374.587616L676.039189 374.587616z" p-id="2834"></path>' + 
        '<path d="M273.629633 641.2288l-7.361578-0.044888-5.639014 4.878729c-39.652647 34.594367-62.890433 85.02286-76.412844 136.475353-13.037063 49.892647-16.94229 100.854181-17.702575 138.422356l-0.401184 19.918904 19.871211 0L802.17074 940.879255l17.475332 0 1.904921-17.475332c4.878729-45.238356-2.83634-102.545885-19.697271-155.058849-16.055759-50.161973-40.749589-96.730126-71.045962-125.343211l-5.942005-5.633403-8.026477 0.263715-94.603573 3.237523 0 38.984942 87.463627-2.976614c22.749633 24.306674 41.86617 62.130148 55.082784 103.390334 13.13806 40.889863 20.179814 84.621677 19.161425 121.519342-476.693041 0-90.072723 0-577.816548 0 1.593512-32.285458 5.807342-71.315288 15.834126-109.467003 11.087255-42.354323 29.314455-83.47143 59.03851-112.067682l79.299682 0.706981 0-38.94286L273.629633 641.2288z" p-id="2835"></path>' + 
        '<path d="M873.662773 322.251397 873.662773 345.270356 999.760658 345.270356 999.760658 322.251397Z" p-id="2836"></path>' + 
        '<path d="M740.570827 322.251397 740.570827 345.270356 853.66251 345.270356 853.66251 322.251397Z" p-id="2837"></path><path d="M936.199715 244.323595 936.199715 267.342553 999.760658 267.342553 999.760658 244.323595Z" p-id="2838"></path><path d="M885.156822 244.323595 885.156822 267.342553 910.700712 267.342553 910.700712 244.323595Z" p-id="2839"></path><path d="M811.086553 244.323595 811.086553 267.342553 862.179945 267.342553 862.179945 244.323595Z" p-id="2840"></path><path d="M740.570827 244.323595 740.570827 267.342553 791.574444 267.342553 791.574444 244.323595Z" p-id="2841"></path><path d="M740.570827 172.250827 740.570827 195.269786 999.763463 195.269786 999.763463 172.250827Z" p-id="2842"></path><path d="M335.100493 408.071014c0.799562 11.752153 2.794258 21.644274 6.034586 29.364953 3.234718 7.846926 7.670181 12.905205 13.303584 14.633381l9.577907 2.973808 2.620318 9.667682c12.332888 45.459989 30.069129 78.545008 52.296942 101.34514 20.712855 21.209425 45.63954 33.61806 73.935605 38.984942 32.1536-7.313885 57.700296-20.443529 77.835222-41.686619 21.332866-22.530805 37.253962-54.687211 49.146389-99.041841l2.48846-9.224416 9.047671-3.195441c5.501545-1.907726 9.847233-7.095058 13.039868-14.944789 3.060778-7.670181 5.007781-17.340668 5.804537-28.787025-5.279912 0.047693-10.643989 0.179551-16.765545 0.931419l-2.437962-8.203222-5.190137 0.311408-2.979419-15.747156c-2.30891-12.285195-5.857841-23.681052-10.461633-34.151101-13.842236 5.855036-29.364953-4.923616-43.375518-12.994981l-7.095058 22.264285-11.446356-1.506542 1.509348-13.57291-12.063562 19.383058-10.733764-2.129359 10.559825-28.739332 0 0c-59.122674 52.465271-128.269326 49.09589-166.811003 19.781436-1.240022 2.971003-2.395879 6.031781-3.45074 9.134641-2.6624 10.646795-5.639014 24.483419-8.295803 35.040438l-0.715397 3.857534-0.266521-0.044888c-0.575123 2.129359-1.108164 3.989392-1.641205 5.633403C353.731682 404.213479 343.884449 406.738411 335.100493 408.071014L335.100493 408.071014z" fill="#FFFFFF" p-id="2843"></path></svg>' +
        '</button>';

    let consultationSubmitToolBtn = `<!-- medical consultation Finish tool button -->
        <button  data-label="病例汇报 Diagnose Submit" title="Submit Consultation" type="button" id="show-consultation-btn" class="btn btn-outline-secondary border-0 toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
            <svg t="1752306972180" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="223260" width="22" height="22"><path d="M895.443 664.08v233.174H136.157V664.08H42.66v279.246c0 36.181 29.115 65.567 65.08 65.567h808.328c36.073 0 65.27-29.384 65.27-65.567V664.08h-85.896z m-681.86-224.331H354.53v287.253c-1.59 11.35 0.352 26.097 9.974 38.766 11.86 15.638 31.056 23.566 57.043 23.566h190.741c24.373 0 38.904-9.787 46.829-18.01 13.913-14.478 15.179-31.382 15.099-37.609v-283.32h127.763c32.999 0 54.107-10.835 62.735-32.269 12.076-29.979-11.701-58.476-22.052-68.988-32.81-42.032-238.134-278.117-275.124-314-17.202-16.554-35.021-20.03-46.938-20.03-30.11 0-50.197 21.08-53.917 25.313L185.168 339.485c-15.366 14.424-37.366 41.464-26.258 70.123 5.336 13.749 19.141 30.14 54.672 30.14z" p-id="223261" fill="#8cbb19"></path></svg>
        </button>`;

    let timerToolBtn = `<!-- timer tool button-->
        <button data-label="${timerToolDataLabel}" title="Show Remaining Time" type="button" id="showTimerBtn" class="btn btn-outline-secondary border toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
           <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="black" class="bi bi-clock" viewBox="0 0 16 16"><path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/></svg>
        </button>`;
    let timerToolNoneBtn = `<!-- timer tool button display none-->
        <button data-label="${timerToolDataLabel}" title="Show Remaining Time" type="button" id="showTimerBtn" class="btn btn-outline-secondary border d-none toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
           <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="black" class="bi bi-clock" viewBox="0 0 16 16"><path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/></svg>
        </button>`;

    let popupQuestionnaireBtn = `<!-- scaffolding tool button-->
        <button data-label="${questionnaireToolDataLabel}" title="View questionnaires" type="button" id="show-popup-questionnaires-btn" class="btn btn-outline-secondary border position-relative toolbar-btn" style="height: 40px; width: 40px; padding: 1px 6px;margin-bottom: 10px;">
           <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="black" class="bi bi-envelope-plus" viewBox="0 0 512 512"><g> <path class="st0" d="M400.486,54.843h-23.954c0.208,2.016,0.323,4.048,0.323,6.119V87.81c0,5.804-0.877,11.4-2.463,16.696h30.312 c0.586,0,1.055,0.469,1.055,1.054v345.485c0,0.585-0.469,1.055-1.055,1.055H107.296c-0.585,0-1.055-0.47-1.055-1.055V105.56 c0-0.585,0.47-1.054,1.055-1.054h30.312c-1.585-5.296-2.463-10.892-2.463-16.696V60.962c0-2.071,0.116-4.103,0.323-6.119h-23.954 c-28.988,0-52.565,23.576-52.565,52.564v352.027c0,28.988,23.577,52.565,52.565,52.565h288.971 c28.988,0,52.564-23.577,52.564-52.565V107.408C453.05,78.42,429.474,54.843,400.486,54.843z"/> <path class="st0" d="M193.483,122.502h125.035c19.127,0,34.691-15.565,34.691-34.692V60.962c0-19.128-15.564-34.691-34.691-34.691 h-27.395C286.612,10.884,272.58,0,256,0c-16.588,0-30.612,10.884-35.13,26.271h-27.387c-19.128,0-34.692,15.564-34.692,34.691 V87.81C158.791,106.938,174.355,122.502,193.483,122.502z M256.008,23.561c7.281,0,13.209,5.927,13.209,13.209 c0,7.305-5.928,13.232-13.209,13.232c-7.297,0-13.232-5.926-13.232-13.232C242.776,29.488,248.711,23.561,256.008,23.561z"/> <polygon class="st0" points="188.387,204.871 220.046,173.204 208.538,161.696 176.872,193.355 156.728,173.204 145.214,184.719 176.872,216.386 \t"/> <polygon class="st0" points="188.387,287.632 220.046,255.965 208.538,244.458 176.872,276.116 156.728,255.965 145.214,267.48 176.872,299.147 \t"/> <polygon class="st0" points="220.046,338.726 208.538,327.219 176.872,358.878 156.728,338.726 145.214,350.241 188.387,370.393 "/> </g></svg>
           <span class="position-absolute translate-middle badge rounded-pill bg-danger d-none gpt-scaffold-flash-icon" style="top:12px; left:-100px; height: 55px; width: 220px; font-size:1.5em;">new questions<span class="visually-hidden">' + popupUnreadMessageText + '</span></span>
        </button>`;

    let instrumentationToolContainerEnd = '</div></div>';

    let agentsBtns = "";
    if (typeof multiAgentsMultiWindowsConfig !== 'undefined' && useMultiAgentsMultiWindowsTool) {
        multiAgentsMultiWindowsConfig.forEach(temp => {
            if (temp.useAgent) {
                agentsBtns += generateChatgptAgentIcon(temp.agentName, temp.agentToolIconSvg);
            }
        });
    }

    let toolsStr = `${instrumentationToolContainerStart} 
                    ${typeof useAnnotationTool !== 'undefined' && useAnnotationTool ? annotationToolBtn + annotationSearchToolBtn : ''}
                    ${typeof useScaffoldTool !== 'undefined' && useScaffoldTool? scaffoldsToolBtn : ''}
                    ${typeof useGPTScaffoldTool !== 'undefined' && useGPTScaffoldTool? gptScaffoldsToolBtn : ''}
                    ${typeof useChatWithScaffoldTool !== 'undefined' && useChatWithScaffoldTool? gptChatWithScaffoldsToolBtn : ''}
                    ${typeof useZoteroNotesTool !== 'undefined' && useZoteroNotesTool? zoteroNotesToolBtn : ''}
                    ${typeof useProcessVisualTool !== 'undefined' && useProcessVisualTool? processVisualToolBtn: ''}
                    ${typeof useEssayProductAnalysisTool !== 'undefined' && useEssayProductAnalysisTool? essayProductVisualToolBtn: ''}
                    
                    ${typeof useConsultationTableTool !== 'undefined' && useConsultationTableTool ? consultationTableToolBtn : ''}
                    ${typeof useWriteEssayTool !== 'undefined' && useWriteEssayTool ? essayWritingToolBtn : ''}
                    ${typeof usePlannerTool !== 'undefined' && usePlannerTool ? plannerToolBtn : ''}
                    ${typeof useCollaborativeWriteEssayTool !== 'undefined' && useCollaborativeWriteEssayTool ? collaborateWritingToolBtn: ''}
                    ${typeof useMathEditorTool !== 'undefined' && useMathEditorTool ? mathEditorToolBtn: ''}
                    ${typeof useChecklistTool !== 'undefined' && useChecklistTool ? checklistToolBtn : ''}
                    
                    
                    ${typeof useChatgptAssistantTool !== 'undefined' && useChatgptAssistantTool ? chatgptAssistantToolBtn : ''}
                    ${(typeof useChatgptAssistantTeacherTool !=='undefined' && useChatgptAssistantTeacherTool) ? chatgptAssistantTeacherToolBtn : ''}


                    ${typeof useToeflAssistantTool !=='undefined' && useToeflAssistantTool ? toeflAssistantToolBtn : ''}
                    
                    <!-- useMultiAgentsMultiWindowsTool -->
                    ${typeof useMultiAgentsMultiWindowsTool !== 'undefined' && useMultiAgentsMultiWindowsTool ? agentsBtns : ''}
                    
                    
                    ${typeof useMultiAgentsSingleWindowTool !== 'undefined' && useMultiAgentsSingleWindowTool ? multiAgentsSingleWindowToolBtn : ''}
                    ${typeof usePatientMultiAgentsSingleWindowTool !== 'undefined' && usePatientMultiAgentsSingleWindowTool ? patientMultiAgentsSingleWindowToolBtn : ''}
                    ${typeof useMedicalScaffoldMultiAgentsSingleWindowTool !== 'undefined' && useMedicalScaffoldMultiAgentsSingleWindowTool ? medicalScaffoldMultiAgentsSingleWindowToolBtn : ''}
                    ${typeof useChatgptTool !== 'undefined' && useChatgptTool ? chatgptToolBtn : ''}
                    ${typeof useTigeCheckMultiAgentsSingleWindowTool !== 'undefined' && useTigeCheckMultiAgentsSingleWindowTool ? tigeCheckMultiAgentsSingleWindowToolBtn : ''}
                    ${typeof useAssistCheckMultiAgentsSingleWindowTool !== 'undefined' && useAssistCheckMultiAgentsSingleWindowTool ? assistCheckMultiAgentsSingleWindowToolBtn : ''}
                    
                    <!-- 区域国别课程 -->
                    ${typeof useTitleAssistMultiAgentsSingleWindowTool !== 'undefined' && useTitleAssistMultiAgentsSingleWindowTool ? titleAssistMultiAgentsSingleWindowToolBtn : ''}
                    ${typeof useWritingAssistMultiAgentsSingleWindowTool !== 'undefined' && useWritingAssistMultiAgentsSingleWindowTool ? writingAssistMultiAgentsSingleWindowToolBtn : ''}
                    ${typeof useAssessmentAssistMultiAgentsSingleWindowTool !== 'undefined' && useAssessmentAssistMultiAgentsSingleWindowTool ? assessmentAssistMultiAgentsSingleWindowToolBtn : ''}
                            
                    ${typeof useDictionaryTool !== 'undefined' && useDictionaryTool ? dictionaryToolBtn : ''}
                    ${typeof useTeacherChat !== 'undefined' && useTeacherChat ? teacherChatBtn : ''}
                    ${typeof usePopupQuestionnaire !== 'undefined' && usePopupQuestionnaire? popupQuestionnaireBtn : ''}
                    
                    ${typeof useConsultationSubmitTool !=='undefined' && useConsultationSubmitTool ? consultationSubmitToolBtn : ''}
                    ${typeof useTimerTool !== 'undefined' && useTimerTool ? timerToolBtn : timerToolNoneBtn}
                    
                    ${instrumentationToolContainerEnd}`;
        // + classificationToolBtn



    $("body").append(toolsStr);
}


if (window.location.href.includes("/moodle/mod/page/view.php") ||
    window.location.href.includes("localhost:8080") ||
    window.location.href.includes("index_revision.html") ||
    window.location.href.includes("/myapi/index-revision2") ||
    window.location.href.includes("localhost/myapi")) {
    // 需要在 text js 之后加载
    // 本地直接打开index_revision.html时需要绕过上述条件
    var highlightArea = document.getElementById('page-content');
    var hltr1 = new TextHighlighter(highlightArea);   //correct
    generateToolsMenu();
}
