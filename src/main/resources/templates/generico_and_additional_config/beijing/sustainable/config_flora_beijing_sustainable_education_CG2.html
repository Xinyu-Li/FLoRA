<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

<!--start_ADDITIONAL_HTML_HEAD-->
    <link href="/flora/css/jquery-ui.min.css" rel="stylesheet"/>
<!--    <link href="/css/flipclock.css" rel="stylesheet">-->
    <link href="/flora/css/flipdown.min.css" rel="stylesheet" />
    <link href="/flora/css/quill.snow.min.css" rel="stylesheet"/>
    <link href="/flora/css/instrumentationTools.css" rel="stylesheet" />
    <link href="/flora/css/my-timer.css" rel="stylesheet" />
    <link href="/flora/css/collaboratewrite.css" rel="stylesheet" />
<!--end_ADDITIONAL_HTML_HEAD-->

<!--start_PLUGINS_GENERICO_TEMPLATE_BODY-->

    <script src="/flora/js/jquery.min.js"></script>
    <script src="/flora/js/etherpad.js"></script>
    <script src="/flora/js/diff.js"></script>
    <link href="/flora/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="/flora/js/bootstrap.bundle.min.js"></script>
    <!--    <script src="/flora/js/jquery-ui.min.js" id="myJqueryUI" ></script>-->
    <script src="/flora/js/quill.min.js"></script>
    <!--    <script src="/js/flipclock.js"></script>-->
    <script src="/flora/js/flipdown.min.js"></script>

    <script>
        var currentRange = null;
        var whetherDoHighlight = false;
        var saveHighlight = null;
        var saveHighlightText = '';

        var totalMinutes = 60;
        var unlimitedTime = true; //如果使用unlimited time 则让timer 变成增长，不再是count down
        var hintMinutesBeforeEnd = 5;


        // var annotationTakeNoteLabel = "Takenote";
        // var annotationLabelColors = [
        //     { annotationLabel: 'important', annotationLabelColor: '#99CCFF'},
        //     { annotationLabel: 'useful', annotationLabelColor: '#CCFFCC'},
        //     { annotationLabel: 'concept', annotationLabelColor: '#FFCCE5'},
        //     { annotationLabel: 'confusing', annotationLabelColor: '#75ff66'}
        // ];
        //
        // // scafold content
        // var ruleBasedScaffoldContent = [
        //     {
        //         triggerMinute: 2,
        //         title: 'It is important to understand what the task is about.',
        //         content: ["(a) Use menu to get an overview and skim text", "(b) Check the essay rubric", "(c) Check the learning goals and instructions"],
        //     },
        //     {
        //         triggerMinute: 7,
        //         title: 'It is important to read information about the topics.',
        //         content: ["(a) Note down important information", "(b) Select what to read", "(c) Check the time left"]
        //     },
        //     {
        //         triggerMinute: 16,
        //         title: 'It is important to read relevant information and review your reading.',
        //         content: ["(a) Review annotations to check learning so far", "(b) Review the learning goals and instructions", "(c) Check essay to determine what to read next"]
        //     },
        //     {
        //         triggerMinute: 21,
        //         title: 'It is important to write a good essay.',
        //         content: ["(a) Check the remaining time", "(b) Check the essay rubric", "(c) Draft essay by transferring learning to main points"]
        //     },
        //     {
        //         triggerMinute: 35,
        //         title: 'It is important to write relevant information and check your writing.',
        //         content: ["(a) Check the essay rubric", "(b) Edit your essay", "(c) Check the learning goals and instructions"]
        //     }
        // ];

        // var useWriteEssayGrammarly = true;

        // var plannerSelectStrategyHint = "Please select one strategy to continue!!!";
        // var plannerAllocateTimeHint = "Please allocate time to all tasks and total time must within " + totalMinutes + " minutes!!!";
        // var plannerSelectSkillsHint = "Please selected skills you plan to use!!!";
        // var plannerSavePlanHint = "Please fill all the strategy name and correct time!!!";

        // var plannerAllStrategy = [
        //     {
        //         "plannerOverallStrategy": "Read First, then Write",
        //         "plannerStrategyInstruction": "How much time do you plan to spend on reading and writing respectively?",
        //         "plannerStep2Task": [
        //             { "title": "Read first module", "time": 5 },
        //             { "title": "Read second module", "time": 5 },
        //             { "title": "Read third module", "time": 5 },
        //             { "title": "Write essay", "time": 5 },
        //         ],
        //     },
        //     {
        //         "plannerOverallStrategy": "Read and Write Simultaneously",
        //         "plannerStrategyInstruction": "How much time do you plan to spend on each topic?",
        //         "plannerStep2Task": [
        //             { "title": "Read/writing about first module", "time": 10 },
        //             { "title": "Read/writing about second module", "time": 10 },
        //             { "title": "Read/writing about third module", "time": 10 },
        //         ],
        //     },
        //     {
        //         "plannerOverallStrategy": "Write Intensively, Read Selectively",
        //         "plannerStrategyInstruction": "How much time do you plan to spend on different stages of writing?",
        //         "plannerStep2Task": [
        //             { "title": "Conceive the structure of the essay", "time": 5 },
        //             { "title": "Write the first draft", "time": 5 },
        //             { "title": "Read additional information in relation to the essay", "time": 5 },
        //             { "title": "Review, refine and enhance the essay", "time": 5 },
        //         ],
        //     },
        // ]

        // var defaultStep3ReadingStrategy = ["Read the material page by page", "Quick browsing and then detailed reading", "Use the highlight tool to mark key content",
        //     "Write down my understanding in notes while reading", "Question-guided reading with focus on certain content", "Read selectively and skip irrelevant content"];
        // var defaultStep3ReadingInstruction = "What reading skills do you plan to use (multiple choice)?";
        // var defaultStep3WritingStrategy = ["First draft an essay structure and then fill in with details", "Use my notes and highlighting when writing the essay",
        //     "Review instructions and rubrics to get writing in line", "Copy Paste key sentences and then rewrite them fluently", "Use the writing framework and patterns I have learned to write"];
        // var defaultStep3WritingInstruction = "What writing skills do you plan to use (multiple choice)?";
        //
        // var customiseStep2Instruction = "Please describe in detail the learning strategy you plan to adopt and how you will allocate your time. You may also include the reasons for the strategy and time allocation.";




        let eventWebsocket = null;
        let teacherChatWebsocket = null;

        var apiBaseUrl = "http://localhost:8080";
        var websocketApiBaseUrl = "ws://localhost:8080";
        var mainEditor = null;
        var editors = {}; //多个不同的侧边栏editor
        
        // 是否展示工具
        var useAnnotationTool = false;
        var useScaffoldTool = false; // enable
        var useGPTScaffoldTool = false;

        var srlModel = "maria";    // copes
        var gptScaffoldRole = "assistant";


        // var gptScaffoldRoleDescription = "You are a helpful assistant, please give suggestions based on the given text.";
        var gptScaffoldPromptIncludeEssay = true;
        var gptScaffoldPromptTemplate = `This student is working on an essay writing task.

These are task instructions:
Hey there! You're about to dive into a cool project about (1) artificial intelligence (AI) and (2) how it's changing medicine. Your mission is to write a short essay sharing your thoughts.

Here's what you need to do:

Read Up: We've given you some articles to read about AI and the future of medicine.
Write Down: Based on your reading, write a short essay in your own words. Tell us how you think AI fits into everyday life and how it might change healthcare.

Keep in Mind:

Stick to What's Given: Your essay should only use information from the articles we provided.
Be Original: Make sure your essay is all from you. No copying!
Watch the Clock: The time is limited, so plan your time wisely!

Tools for You: You can use the tools we've given you, like the planner, highlighter, and the essay tool to assist you.

This Is All You: Remember, this task is for you to do on your own. No asking for help from friends or teachers.

These are the rubric.

There are two global criteria and three components on which the essay will be graded.

The two global criteria are:
1.    The essay consists of 200 to 300 words.
2.    The essay is written clearly and in your own words, meaning that no part in the essay can be copied from the text or from other sources.

The three components are:
1. Discussion of the concept of AI

2. Discussion of the current use of AI-based technologies in your daily life and in medicine

3. Discussion of the future integration of AI-based technologies in your daily life and in medicine

This is the detailed marking rubric.
1. Discussion of the concept of AI:
No mention (0): No definition of AI is provided.
Sufficient (1): The basic definition of AI is given without further explanation.
Good (2): AI is defined and explained in the student's own words but lacks depth or examples.
Excellent (3): AI is thoroughly defined and explained in the student's own words, including novel information and personal insights with examples.

2. Discussion of the current use of AI-based technologies in your daily life and in medicine:
No mention (0): No mention of AI's current medical applications.
Sufficient (1): Mentions AI's current applications in medicine but lacks detail.
Good (2): Describes AI's current applications in medicine in detail but lacks examples or insights.
Excellent (3): Describes AI's current applications in medicine in detail, providing examples or personal insights.

3. Discussion of the future integration of AI-based technologies in your daily life and in medicine:
No mention (0): No mention of AI's potential future applications in medicine.
Sufficient (1): Mentions possible future applications of AI in medicine but lacks detail.
Good (2): Discusses potential future applications of AI in medicine in detail but lacks innovation or deep analysis.
Excellent (3): Discusses potential future applications of AI in medicine in detail, offering innovative ideas or in-depth analysis.

This is the reading material for the task:
Artificial intelligence:

1.     What is artificial intelligence?
Artificial intelligence (AI) is the ability of computers to perform tasks for which humans will use their intelligence. You can consider solving problems, identifying objects, making predictions, and interacting with the environment as examples of AI tasks. For example, a robot can talk to a child to help the child enhance communication skills and improve learning. Intelligent robots can also be involved to assist doctors treating young patients. Intelligent robots can be used for psychological treatment by providing interactive support for people who have depression.

2.     How does AI work?
Systems that use artificial intelligence (AI) can simulate human intelligence by analysing data and predicting future events. Typically, AI consists of two components: algorithms and data. Each algorithm includes a set of steps that the system needs to perform to find a solution. You can consider an algorithm like a recipe when you are baking a cake. Data is the ingredient that makes the cake. By analysing more data, the algorithm can make better recommendations. Just like when you have more variety of ingredients, you can make a fancier cake. A key difference between AI and other technologies is that the AI-incorporated systems can learn from the data. Another example, the more analysed data in the health field, the more efficient recommendations that doctors can get.

3.     AI in practice
During the COVID-19 pandemic, researchers developed an AI tool to predict which patients might get COVID and how severe their symptoms might be. They tested it on 53 patients, gathering their health details. Instead of common signs like fever or age, the AI successfully used unique factors like liver enzymes, muscle pain, and blood hemoglobin levels to predict breathing problems with up to 80% accuracy. This shows the powerful potential of AI in medical practices.

4.     Difference between AI and regular programming
When you build a program to check a person's temperature, it simply reads the thermometer and gives a number. That's regular programming. But with AI, it's different. Imagine you're trying to create a program that looks at pictures of skin and tells if someone has a rash or not. Instead of telling the program exactly what every rash looks like, you show it thousands of skin pictures, some with rashes and some without. The AI learns by studying these photos and spotting patterns or differences. For a human, checking all those photos would be tough, but AI can do it quickly. Once trained, the AI can check new skin photos on its own. But if it doesn't see new pictures regularly, it won't keep learning.

5.     The role of the human remains crucial.
Although AI is being increasingly used in hospitals and healthcare, doctors’ roles are still important for many reasons. Firstly, doctors should always review the outcomes of AI systems to make sure that there are no potential mistakes. Secondly, some medical cases are unique or they rarely happen, so AI couldn’t learn about them. So, these special cases need expert doctors to make the right diagnosis based on their previous experiences. Finally, doctors can understand the patients' feelings better than AI systems.

6.     Are AI machines smarter than humans?
There are some differences between artificial intelligence and human intelligence. For example, AI systems can analyse and learn from patients’ data very quickly which will take a long time for doctors. However, doctors can think in a more flexible way. They could often spot patients' behaviours better than AI systems.

7.     The current limits and possibilities of AI.
Although artificial intelligence has facilitated our daily life, there are some limitations and possibilities to use it. For example, AI systems that are used in hospitals can solve problems based on identified data which sometimes is not enough for illness diagnosing. Also, AI systems can not realise their mistakes like humans which could sometimes be dangerous. On the other hand, intelligent systems can assist doctors to do the routine tasks which can save their as well as patients’ time who wait for treatment. For example, the AI system can read and discover the illness signs from the patient scan picture.

The medicine and the future:

1.     Technology changing medicine
Globally, many countries are updating their health systems to be based on AI due to many advantages. First, AI could reduce the cost of healthcare and the cost of patient travel by minimising the visits to clinics. Second, AI systems can help people to monitor their health and predict their possible illnesses, even in the long term. Finally, many healthcare providers could use virtual robots to provide their services while patients are at home.

2.     AI and disease detection
Researchers at a US university developed an AI system to help identify patients at high risk of heart problems. They recognized that many heart patients faced dangers because there wasn't enough knowledge about their health problems. To fix this, they used AI to analyse data from hundreds of heart patients. They collected hundreds of heart images. They also created another AI system that analysed 10 years of data, considering factors like age and weight. Both AI systems were very accurate in predicting heart health risks. This shows that AI can play a crucial role in helping doctors prevent heart-related complications.

It often takes doctors some time to study X-ray images. But researchers from two US groups made an AI tool that can look at X-ray results in just 10 seconds, which is very quick! They used this AI to make clearer pictures for people with lung problems. They trained the AI using 188,000 chest images to tell if someone has a lung issue. This fast and clear way of checking X-rays with AI might help doctors study other diseases, too.

3.     AI and mental illness
Previously, more people were suffering from mental health problems. Researchers at Mayo Clinic made an AI tool to guess how well medicine for depression works. They tested it on kids and adults with depression, looking at 6 depression points and how they improved over 10 to 12 weeks. The AI was right about 76% of the time. This shows that AI can help in treating mental health issues.

4.     Patients’ perspectives
Researchers at a US university found that many patients do not trust AI systems to get advice due to privacy reasons. For example, an AI doctor (robot) may sometimes ask the patient too many questions that would make her or him uncomfortable. Also, some patients may feel that AI systems are too far from reality.

5.     Doctor’s perspectives
Researchers explained that doctors should know how AI systems “think” before applying them in their work, to avoid any risk. Also, researchers have discussed that many doctors do not know how to use those intelligent systems due to the shortage of their technical skills.

6.     AI accuracy in medicine
AI is getting popular in health care, but it's not always perfect. Some researchers wanted to see if AI could identify lung problems by looking at chest photos from 5 different places across the world. They tested it with 158,000 pictures! But, the AI didn't work well in 3 of those countries. This shows that while AI can be helpful, it's important to test it a lot and use it carefully, especially in health care.

In another study, researchers at two big universities found that using AI for medical images isn't perfect yet. They tested an AI program on a number of images and found mistakes. So, they warn doctors to be careful using AI-made pictures. However, AI can make clear medical images fast. This could mean patients spend less time using MRI devices, which is safer and more efficient. But for AI to work well in medicine, it needs to be accurate and stable. Programmers should check their AI programs well before using them in hospitals. Remember, the more data an AI looks at, the better it can get.

7.     AI and data security in health field
Many online AI systems can be tricked by hackers. Researchers found that hackers can change medical images, which might make doctors give the wrong advice to a patient. To help stop this, researchers made a smart AI tool that can tell if medical images have been changed. They also made another AI tool that can explain how these changes happened. The researchers found that many medical images were changed. This means researchers and engineers need to ensure that AI used in hospitals is safe from hackers.

8.     How does hospitals in the future looks like with AI
In the future hospitals, AI systems might play a huge role in patient care. When a patient first arrives, AI can assist doctors in understanding symptoms quickly and in recommending treatments. As the patient gets better, the system might adjust its advice, trusting the doctor's judgement more. For instance, if the AI suggests a particular medicine, but the doctor, with her or his experience, believes another medicine  is more suitable, the AI system gets updated and learns from the doctor’s choice. Over time, the AI gets to understand more about the doctor's approach, making the doctor-AI collaboration smoother. As a result, AI adapts to doctor’s expertise, ensuring the best care for patients.


;;;ADAPTIVE_PROMPT;;;


;;;SRL_PROCESS_PROMPT;;;

For this feedback, please follow the effective feedback framework. It is learner-centred and it should include three main components:
1. Highlight both strengths and weaknesses of the student’s performance in relation to what they did in the task so far. This should come from conditions listed above.
2. Focus on the future impact by providing comments with actionable information to help the student achieve the learning outcomes for the task. This should come from the advice listed above.
3. Support the student to feel in control of their learning, attend to their social, emotional and motivational needs, and encourage them to be open to evaluative comments.

The feedback should not exceed 100 words.`;
        var gptScaffoldBackgroundFileNameList = [];
        var gptScaffoldParameters = [200, 1, 2]; //  response max token, n, temperature/10

        // var gptScaffoldNeedCheckSubActionPrompt = [
        //     {
        //         "subAction": "SAVE_PLANNER",
        //         "notExistPrompt": "This student has not created explicit plans for how they will go about the task.",
        //         "existPrompt": "This student has created explicit plans for how they will go about the task.",
        //         "threshold": 0,
        //         "appearOverThresholdPrompt": "",
        //         "appearLessThanEqualThresholdPrompt": ""
        //     },
        //     {
        //         "subAction": "TIMER",
        //         "notExistPrompt": "This student is not aware of the time left to complete the task.",
        //         "existPrompt": "This student is aware of the time left to complete the task.",
        //         "threshold": 0,
        //         "appearOverThresholdPrompt": "",
        //         "appearLessThanEqualThresholdPrompt": ""
        //     },
        //     {
        //         "subAction": "TRY_OUT_TOOLS",
        //         "notExistPrompt": "This student is not aware of the tools available in the environment that may help them complete the task.",
        //         "existPrompt": "This student is aware of the tools available in the environment that may help them complete the task.",
        //         "threshold": 0,
        //         "appearOverThresholdPrompt": "",
        //         "appearLessThanEqualThresholdPrompt": ""
        //     },
        //     {
        //         "subAction": "PAGE_NAVIGATION",
        //         "notExistPrompt": "This student is not aware of the available reading materials in the environment that may help them with the task.",
        //         "existPrompt": "This student is aware of the available reading materials in the environment that may help them with the task.",
        //         "threshold": 0,
        //         "appearOverThresholdPrompt": "",
        //         "appearLessThanEqualThresholdPrompt": ""
        //     },
        //     {
        //         "subAction": "RUBRIC",
        //         "notExistPrompt": "This student is not aware of the rubric.",
        //         "existPrompt": "This student is aware of the rubric.",
        //         "threshold": 0,
        //         "appearOverThresholdPrompt": "",
        //         "appearLessThanEqualThresholdPrompt": ""
        //     },
        //     {
        //         "subAction": "TASK_REQUIREMENT",
        //         "notExistPrompt": "This student is not aware of the task instructions.",
        //         "existPrompt": "This student is aware of the task instructions.",
        //         "threshold": 0,
        //         "appearOverThresholdPrompt": "",
        //         "appearLessThanEqualThresholdPrompt": ""
        //     }];
        //
        // var gptScaffoldNeedCheckSavePlannerSelectIndexPrompt = ["", //0 means not select, so return ""
        //     "This student came up with the plan to [read first then write] for this task.",
        //     "This student came up with the plan to [read and write at the same time] for this task.",
        //     "This student came up with the plan to [write intensively and read selectively] for this task.",
        //     "This student came up with the plan to [design his own plan] for the task"]; // 确保此处数量和planner 选项数量一致
        //
        // var testISDIMUName = "Activity 3: knowledge in learning tactics";
        // var preTestName = "Activity 2: knowledge test - AI in medicine";
        // var hasTakePreviousStudyTestName = "Activity 1: about yourself";

        var testISDIMUCourseId = 2;
        var hasTakePreviousStudyTestNameCourseId = 2;
        var pretestNameCourseId = 2;

        var pretestGradesPrompt = [{"threshold": 0, "prompt": "This student has a high level of knowledge about AI in medicine."},
            {"threshold": 5, "prompt": "This student has a low level of knowledge about AI in medicine."},
            {"threshold": 10, "prompt": "This student has a medium level of knowledge about AI in medicine."}];
        var isdimuScorePrompt = [{"threshold": 0, "prompt": "This student seems to have good understanding of various strategies or techniques that can be applied to facilitate learning."},
            {"threshold": 16, "prompt": "This student seems to have a low level of understanding of various strategies or techniques that can be applied to facilitate learning."},
            {"threshold": 32, "prompt": "This student seems to have some understanding of various strategies or techniques that can be applied to facilitate learning."}];
        //
        // var userTakePreviousStudyPrompt = "This student has participated in the prior study so he/she has a certain level of task knowledge.";

        var classifySentenceBackgroundFileNameList = ["CELLA_main_task_reading.docx"]; // cella_monash_main_task2_medicine.docx, TODO 使其可以支持docx 和pdf

        var gptScaffoldNeedCheckSRLProcessPrompt = [
            {
                triggerMinute: 14,
                beginMinute: 7,
                endMinute: 14,
                rules: []
            },
            {
                triggerMinute: 21,
                beginMinute: 14,
                endMinute: 21,
                rules: []
            },
            {
                triggerMinute: 28,
                beginMinute: 21,
                endMinute: 28,
                rules: []
            }
        ];
        // var gptScaffoldNeedCheckSRLProcessPrompt = [
        //     {
        //         triggerMinute: 1,
        //         beginMinute: 7,
        //         endMinute: 14,
        //         rules: [
        //             {
        //                 "srlProcess": "CMTR2",
        //                 "notExistPrompt": "We have one student who is currently working on this learning task. Up until the 14th minute in the learning session, other students who performed well in this task have constantly checked the task instruction and rubric. This is not the case with this student. So, considering all the information provided above (including the task requirements, rubric, and reading material), and given the learning conditions of this particular student provided above, provide the student with paragraph-style (don't use the bullet points and numbered lists) feedback on how to check task instructions and rubric regularly until the end of this writing session.",
        //                 "existPrompt": "",
        //                 "threshold": 0,
        //                 "appearOverThresholdPrompt": "",
        //                 "appearLessThanEqualThresholdPrompt": ""
        //             }
        //         ]
        //     },
        //     {
        //         triggerMinute: 3,
        //         beginMinute: 14,
        //         endMinute: 21,
        //         rules: [
        //             {
        //                 "srlProcess": "OR2",
        //                 "notExistPrompt": "We have one student who is currently working on this learning task. Up until the 21st minute in the learning session, other students who performed well in this task have already started including some information from the reading material in their essays. This doesn’t seem to be the case with this student. So, considering all the information provided above (including the task requirements, rubric, and reading material), and given the learning conditions of this particular student provided above, provide the student with paragraph-style (don't use the bullet points and numbered lists) feedback on how to include information from the reading material to their essay draft, based on task requirements.",
        //                 "existPrompt": "",
        //                 "threshold": 0,
        //                 "appearOverThresholdPrompt": "",
        //                 "appearLessThanEqualThresholdPrompt": ""
        //             }
        //         ]
        //     },
        //     {
        //         triggerMinute: 5,
        //         beginMinute: 21,
        //         endMinute: 28,
        //         rules: [
        //             {
        //                 "srlProcess": "OT2",
        //                 "notExistPrompt": "",
        //                 "existPrompt": "",
        //                 "threshold": 3,
        //                 "appearOverThresholdPrompt": "",
        //                 "appearLessThanEqualThresholdPrompt": "We have one student who is currently working on this learning task. Up until the 28th minute in the learning session, other students who performed well in this task had already started adding novel information in their own words, based on the reading material. This doesn’t seem to be the case with this student. So, considering all the information provided above (including the task requirements, rubric, and reading material), and given the learning conditions of this particular student provided above, provide the student with paragraph-style (don't use the bullet points and numbered lists) feedback on how to expand on the information they used from reading materials. The student should do this in their own words."
        //             }
        //         ]
        //     }
        // ];



        var useWriteEssayTool = true;
        var useWriteEssayWordCountButton = false;
        var useCollaborativeWriteEssayTool = false;
        var useCollaborativeWriteEssayWordCountButton = false;
        var includeChatgptToCollaborativeWriteEssay = false;

        var usePlannerTool = false;
        var useChatgptTool = false;
        var useChatgptRating = false; // chatgpt rating visible or not


        var useMultiAgentsMultiWindowsTool = true;
        var useMultiAgentsMultiWindowsRating = false;
        var wordCountLimit = 300;
        var allowPaste = false;
        var allowCopy = true;
        // 测试多窗口，每个窗口一个agent
        var multiAgentsMultiWindowsConfig = [
            {
                "agentDisplayName":"游学导师",
                "agentName":"tutor_you_cg",
                "agentRole":"tutor",
                "model":"gpt-4o",
                "agentDescription":"You are a tutor. Please answer all the questions.",


                "agentAvatarSvg": "<svg t=\"1721962459834\"  viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4284\" width=\"35\" height=\"35\"><path d=\"M962.323289 340.849992l-3.152806-3.152806L547.367509 48.91199c-10.026354-7.964392-22.358217-12.286838-35.354206-12.286838s-25.327852 4.323469-35.353183 12.286838L64.8551 337.697185l-3.152806 3.152806c-10.760065 10.760065-16.685008 25.065885-16.685008 40.281425 0 15.21861 5.92699 29.525454 16.689101 40.285518l4.500501 4.499477 134.707005 80.345909L200.913892 714.055902c0 73.006757 28.430516 141.641951 80.053244 193.264679 51.623751 51.623751 120.259968 80.053244 193.265702 80.053244l75.532277 0c73.006757 0 141.641951-28.429493 193.264679-80.053244 51.623751-51.622728 80.053244-120.258944 80.053244-193.264679l0-57.759495-102.33062 0 0 57.759495c0 94.28334-76.704986 170.988326-170.988326 170.988326l-75.532277 0c-94.28334 0-170.988326-76.704986-170.988326-170.988326L303.243489 567.29742 478.921627 672.079882c9.591449 6.873548 21.056572 10.579963 33.090653 10.579963s23.500227-3.706415 33.091676-10.579963l412.716786-246.164492 4.501524-4.501524C984.535173 399.201981 984.535173 363.060853 962.323289 340.849992zM512.013303 572.666708 185.623651 377.991913l326.389652-228.886991L838.402955 377.991913 512.013303 572.666708z\" p-id=\"4285\" fill=\"#2c2c2c\"></path></svg>",
                "agentToolIconSvg": "<svg t=\"1721962459834\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4284\" width=\"16\" height=\"16\"><path d=\"M962.323289 340.849992l-3.152806-3.152806L547.367509 48.91199c-10.026354-7.964392-22.358217-12.286838-35.354206-12.286838s-25.327852 4.323469-35.353183 12.286838L64.8551 337.697185l-3.152806 3.152806c-10.760065 10.760065-16.685008 25.065885-16.685008 40.281425 0 15.21861 5.92699 29.525454 16.689101 40.285518l4.500501 4.499477 134.707005 80.345909L200.913892 714.055902c0 73.006757 28.430516 141.641951 80.053244 193.264679 51.623751 51.623751 120.259968 80.053244 193.265702 80.053244l75.532277 0c73.006757 0 141.641951-28.429493 193.264679-80.053244 51.623751-51.622728 80.053244-120.258944 80.053244-193.264679l0-57.759495-102.33062 0 0 57.759495c0 94.28334-76.704986 170.988326-170.988326 170.988326l-75.532277 0c-94.28334 0-170.988326-76.704986-170.988326-170.988326L303.243489 567.29742 478.921627 672.079882c9.591449 6.873548 21.056572 10.579963 33.090653 10.579963s23.500227-3.706415 33.091676-10.579963l412.716786-246.164492 4.501524-4.501524C984.535173 399.201981 984.535173 363.060853 962.323289 340.849992zM512.013303 572.666708 185.623651 377.991913l326.389652-228.886991L838.402955 377.991913 512.013303 572.666708z\" p-id=\"4285\" fill=\"#2c2c2c\"></path></svg>",
                "useAgent": false,
                "promptIncludeEssay":false,
                "backgroundFileNameList":[],
                "chatgptParameters":[1000, 1, 2],
            },
            {
                "agentDisplayName":"小鲸",
                "agentName":"bot_xiaojing",
                "agentRole":"robot",
                "model":"gpt-4o",
                "agentDescription":"You are an environmentalist representative. Please answer all the questions.",


                "agentAvatarSvg": "<svg t=\"1723719959099\" viewBox=\"0 0 1280 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"5406\" width=\"35\" height=\"35\"><path d=\"M864 576c-17.68 0-32 14.32-32 32s14.32 32 32 32 32-14.32 32-32-14.32-32-32-32z m160-320c-421 0-574.7 448-664.24 448-21.92 0-39.76-17.84-39.76-39.76V448l94.76-49.8c20.78-11.86 33.24-31.86 33.24-53.24V160.06c0-18.82-18.02-32.06-37.44-32.06-6.94 0-14.06 1.7-20.6 5.42L224 228.26 58.04 133.42A41.562 41.562 0 0 0 37.44 128C18.02 128 0 141.22 0 160.06v184.9c0 21.4 12.48 41.38 33.24 53.24L128 448v216.24c0 128 103.76 231.76 231.76 231.76H1120c88.36 0 160-71.64 160-160V513.08C1280 367.18 1152 256 1024 256z m192 480c0 52.94-43.06 96-96 96H359.76C267.26 832 192 756.74 192 664.24V409.34l-128-67.68v-131.12l160 91.42 160-91.42v131.52l-128 67.28v254.92c0 57.2 46.54 103.76 103.76 103.76 59.6 0 99.9-51.9 160.9-130.46C618.82 511.08 767.2 320 1024 320c90.82 0 192 79.3 192 193.08V736z\" p-id=\"5407\"></path></svg>",
                "agentToolIconSvg":"<svg t=\"1723719959099\" class=\"icon\" viewBox=\"0 0 1280 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"5406\" width=\"18\" height=\"18\"><path d=\"M864 576c-17.68 0-32 14.32-32 32s14.32 32 32 32 32-14.32 32-32-14.32-32-32-32z m160-320c-421 0-574.7 448-664.24 448-21.92 0-39.76-17.84-39.76-39.76V448l94.76-49.8c20.78-11.86 33.24-31.86 33.24-53.24V160.06c0-18.82-18.02-32.06-37.44-32.06-6.94 0-14.06 1.7-20.6 5.42L224 228.26 58.04 133.42A41.562 41.562 0 0 0 37.44 128C18.02 128 0 141.22 0 160.06v184.9c0 21.4 12.48 41.38 33.24 53.24L128 448v216.24c0 128 103.76 231.76 231.76 231.76H1120c88.36 0 160-71.64 160-160V513.08C1280 367.18 1152 256 1024 256z m192 480c0 52.94-43.06 96-96 96H359.76C267.26 832 192 756.74 192 664.24V409.34l-128-67.68v-131.12l160 91.42 160-91.42v131.52l-128 67.28v254.92c0 57.2 46.54 103.76 103.76 103.76 59.6 0 99.9-51.9 160.9-130.46C618.82 511.08 767.2 320 1024 320c90.82 0 192 79.3 192 193.08V736z\" p-id=\"5407\"></path></svg>",
                "useAgent": true,
                "promptIncludeEssay":false,
                "backgroundFileNameList":[],
                "chatgptParameters":[1000, 1, 2],
            }
        ];

        var chatgptBackgroundFileNameList = []; // add pdf file names here    TODO 使其可以支持docx 和pdf
        // var chatgptRoleDescription = "You are a helpful assistant and please answers questions based on the provided text."; //这个会和question 一起发送给GPT
        var chatgptRole = "assistant";
        var chatgptPromptIncludeEssay = true;
        // var includeSurveyToChatgptPrompt = []; // [1, 2, 3]
        var chatgptParameters = [1000, 1, 2]; //  response max token, n, temperature/10
        var chatgptType = "chat";

        var useChecklistTool = false;
        var useChecklistToolGrammar = false;
        var useChecklistToolAcademic = false;
        var useChecklistToolOriginality = false;
        var useChecklistToolClassification = false;
        var useDictionaryTool = false;
        var dictionarySourceLanguage = "zh-cn";
        var dictionaryTargetLanguage = "en";
        var useTeacherChat = false;
        var useTimerTool = false;
        var useVideoRecordingTool = false;

        var toolsLanguage = "zh";

        const toolList1 = [];

        // var studyName = "cella_oulu_task2_ai_in_edu_groupB"; //change to "uniSA" if needed
        var studyName = "beijing_sustainable_education"; //change to "uniSA" if needed
        function loadScript(url) {
            let currentDate = new Date();

            // Get the year, month, and day from the date object
            let year = currentDate.getFullYear();
            let month = currentDate.getMonth() + 1; // Month is 0-indexed
            let day = currentDate.getDate();

            // Pad the month and day with leading zeros if they are less than 10
            month = month < 10 ? '0' + month : month;
            day = day < 10 ? '0' + day : day;

            // Concatenate the year, month, and day to form the desired format
            let formattedDate = year.toString() + month.toString() + day.toString();

            var script = document.createElement("script");
            script.type = "text/javascript";
            script.src = url + "?v=" + formattedDate;
            // var script = document.createElement("script");
            // script.type = "text/javascript";
            // script.src = url;
            script.defer = true;
            script.async = false;
            document.head.appendChild(script);
        }
        function getURLParameters(url) {
            var params = {};
            var parser = document.createElement('a');
            parser.href = url;
            var query = parser.search.substring(1);
            var vars = query.split('&');
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split('=');
                params[pair[0]] = decodeURIComponent(pair[1]);
            }
            return params; // string 类型
        }
        // let navTagA = document.querySelector("#page-navbar>nav>ol>li>a"); //this element saves the courseId in Moodle webpage
        const ol = document.querySelector("#page-navbar>nav>ol.breadcrumb");
        var currentCourseId = 101; // test toefl to set 1
        if (ol) {
            const liList = ol.querySelectorAll('li');
            if (liList.length >= 2) {
                const secondLastLi = liList[liList.length - 2];
                const a = secondLastLi.querySelector('a');
                if (a) {
                    // console.log(a.href); // 这里就是你想要的 url
                    currentCourseId = getURLParameters(a.href).id;
                    a.onclick = "return false;";
                }
            }
        }
    </script>

    <script>
        //清除 trace data，正式环境删除掉, // TODO 需要测试一下 此处和generico 哪个先执行，可能需要移到Generico里面
        // controller defined in TestController
        function clearTraceData() {
            localStorage.clear();
            $.get(apiBaseUrl + "/clear-user-log-data/2");
            // console.log("clear trace data")
        }
        // clearTraceData();

    </script>
    <script>
        // script usage  在这里读取相应的script


        loadScript("/flora/js/text.js");
        loadScript("/flora/js/i18n_function.js");
        essayTitle = "笔记面板";   // 生态文明专用名称
        loadScript("/flora/js/generateToolsHtml.js");
        loadScript("/flora/js/tools_00common.js");

        if(useAnnotationTool) loadScript("/flora/js/tools_01annotation.js");
        if(useScaffoldTool) loadScript("/flora/js/tools_02scaffolding.js");
        if(useWriteEssayTool) loadScript("/flora/js/tools_03essay_writing.js");
        if(usePlannerTool) loadScript("/flora/js/tools_04planner.js");
        if(useChatgptTool) loadScript("/flora/js/tools_05chatgpt.js");
        if(useChecklistTool) loadScript("/flora/js/tools_06checklist.js");
        if(useVideoRecordingTool) {
            loadScript("/flora/js/MediaStreamRecorder.js");
            loadScript("/flora/js/tools_09record_video.js");
        }
        if (typeof useMultiAgentsMultiWindowsTool !== 'undefined' && useMultiAgentsMultiWindowsTool) {
            loadScript("/flora/js/tools_15multi_agents_multi_windows.js");
        }
        if (typeof useMultiAgentsSingleWindowTool !== 'undefined' && useMultiAgentsSingleWindowTool) {
            loadScript("/flora/js/tools_15multi_agents_single_window.js")
        }

        // if(useTimerTool) 不确定timer是否需要按需加载
        loadScript("/flora/js/tools_08timer.js");
        if(useDictionaryTool) loadScript("/flora/js/tools_10dictionary.js");
        if(useTeacherChat) loadScript("/flora/js/tools_11teacherchat.js");
        if (useCollaborativeWriteEssayTool) loadScript("/flora/js/tools_12collaboratewrite.js");
        if(useGPTScaffoldTool) loadScript("/flora/js/tools_07gpt_scaffolding.js");
        loadScript("/flora/js/setupInstrumentationTools.js");

    </script>

<!--end_PLUGINS_GENERICO_TEMPLATE_BODY-->
</head>

</html>